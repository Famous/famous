/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mark@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: david@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: mike@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 *
 * Owner: felix@famo.us
 * @license MPL 2.0
 * @copyright Famous Industries, Inc. 2014
 */

define("famous/core/Entity",["require","exports","module"],function(t,i,e){function n(t){return a[t]}function s(t,i){a[t]=i}function o(t){var i=a.length;return s(i,t),i}function r(t){s(t,null)}var a=[];e.exports={register:o,unregister:r,get:n,set:s}}),define("famous/core/Transform",["require","exports","module"],function(t,i,e){function n(t){return 2===t.length?t[0]*t[0]+t[1]*t[1]:t[0]*t[0]+t[1]*t[1]+t[2]*t[2]}function s(t){return Math.sqrt(n(t))}function o(t){return 0>t?-1:1}var r={};r.precision=1e-6,r.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.multiply4x4=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2]+t[12]*i[3],t[1]*i[0]+t[5]*i[1]+t[9]*i[2]+t[13]*i[3],t[2]*i[0]+t[6]*i[1]+t[10]*i[2]+t[14]*i[3],t[3]*i[0]+t[7]*i[1]+t[11]*i[2]+t[15]*i[3],t[0]*i[4]+t[4]*i[5]+t[8]*i[6]+t[12]*i[7],t[1]*i[4]+t[5]*i[5]+t[9]*i[6]+t[13]*i[7],t[2]*i[4]+t[6]*i[5]+t[10]*i[6]+t[14]*i[7],t[3]*i[4]+t[7]*i[5]+t[11]*i[6]+t[15]*i[7],t[0]*i[8]+t[4]*i[9]+t[8]*i[10]+t[12]*i[11],t[1]*i[8]+t[5]*i[9]+t[9]*i[10]+t[13]*i[11],t[2]*i[8]+t[6]*i[9]+t[10]*i[10]+t[14]*i[11],t[3]*i[8]+t[7]*i[9]+t[11]*i[10]+t[15]*i[11],t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12]*i[15],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13]*i[15],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14]*i[15],t[3]*i[12]+t[7]*i[13]+t[11]*i[14]+t[15]*i[15]]},r.multiply=function(t,i){return[t[0]*i[0]+t[4]*i[1]+t[8]*i[2],t[1]*i[0]+t[5]*i[1]+t[9]*i[2],t[2]*i[0]+t[6]*i[1]+t[10]*i[2],0,t[0]*i[4]+t[4]*i[5]+t[8]*i[6],t[1]*i[4]+t[5]*i[5]+t[9]*i[6],t[2]*i[4]+t[6]*i[5]+t[10]*i[6],0,t[0]*i[8]+t[4]*i[9]+t[8]*i[10],t[1]*i[8]+t[5]*i[9]+t[9]*i[10],t[2]*i[8]+t[6]*i[9]+t[10]*i[10],0,t[0]*i[12]+t[4]*i[13]+t[8]*i[14]+t[12],t[1]*i[12]+t[5]*i[13]+t[9]*i[14]+t[13],t[2]*i[12]+t[6]*i[13]+t[10]*i[14]+t[14],1]},r.thenMove=function(t,i){return i[2]||(i[2]=0),[t[0],t[1],t[2],0,t[4],t[5],t[6],0,t[8],t[9],t[10],0,t[12]+i[0],t[13]+i[1],t[14]+i[2],1]},r.moveThen=function(t,i){t[2]||(t[2]=0);var e=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],s=t[0]*i[2]+t[1]*i[6]+t[2]*i[10];return r.thenMove(i,[e,n,s])},r.translate=function(t,i,e){return void 0===e&&(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]},r.thenScale=function(t,i){return[i[0]*t[0],i[1]*t[1],i[2]*t[2],0,i[0]*t[4],i[1]*t[5],i[2]*t[6],0,i[0]*t[8],i[1]*t[9],i[2]*t[10],0,i[0]*t[12],i[1]*t[13],i[2]*t[14],1]},r.scale=function(t,i,e){return void 0===e&&(e=1),void 0===i&&(i=t),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]},r.rotateX=function(t){var i=Math.cos(t),e=Math.sin(t);return[1,0,0,0,0,i,e,0,0,-e,i,0,0,0,0,1]},r.rotateY=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,0,-e,0,0,1,0,0,e,0,i,0,0,0,0,1]},r.rotateZ=function(t){var i=Math.cos(t),e=Math.sin(t);return[i,e,0,0,-e,i,0,0,0,0,1,0,0,0,0,1]},r.rotate=function(t,i,e){var n=Math.cos(t),s=Math.sin(t),o=Math.cos(i),r=Math.sin(i),a=Math.cos(e),h=Math.sin(e),c=[o*a,n*h+s*r*a,s*h-n*r*a,0,-o*h,n*a-s*r*h,s*a+n*r*h,0,r,-s*o,n*o,0,0,0,0,1];return c},r.rotateAxis=function(t,i){var e=Math.sin(i),n=Math.cos(i),s=1-n,o=t[0]*t[0]*s,r=t[0]*t[1]*s,a=t[0]*t[2]*s,h=t[1]*t[1]*s,c=t[1]*t[2]*s,p=t[2]*t[2]*s,u=t[0]*e,l=t[1]*e,f=t[2]*e,d=[o+n,r+f,a-l,0,r-f,h+n,c+u,0,a+l,c-u,p+n,0,0,0,0,1];return d},r.aboutOrigin=function(t,i){var e=t[0]-(t[0]*i[0]+t[1]*i[4]+t[2]*i[8]),n=t[1]-(t[0]*i[1]+t[1]*i[5]+t[2]*i[9]),s=t[2]-(t[0]*i[2]+t[1]*i[6]+t[2]*i[10]);return r.thenMove(i,[e,n,s])},r.skew=function(t,i,e){return[1,Math.tan(i),0,0,Math.tan(e),1,0,0,0,Math.tan(t),1,0,0,0,0,1]},r.skewX=function(t){return[1,0,0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]},r.skewY=function(t){return[1,Math.tan(t),0,0,0,1,0,0,0,0,1,0,0,0,0,1]},r.perspective=function(t){return[1,0,0,0,0,1,0,0,0,0,1,-1/t,0,0,0,1]},r.getTranslate=function(t){return[t[12],t[13],t[14]]},r.inverse=function(t){var i=t[5]*t[10]-t[6]*t[9],e=t[4]*t[10]-t[6]*t[8],n=t[4]*t[9]-t[5]*t[8],s=t[1]*t[10]-t[2]*t[9],o=t[0]*t[10]-t[2]*t[8],r=t[0]*t[9]-t[1]*t[8],a=t[1]*t[6]-t[2]*t[5],h=t[0]*t[6]-t[2]*t[4],c=t[0]*t[5]-t[1]*t[4],p=t[0]*i-t[1]*e+t[2]*n,u=1/p,l=[u*i,-u*s,u*a,0,-u*e,u*o,-u*h,0,u*n,-u*r,u*c,0,0,0,0,1];return l[12]=-t[12]*l[0]-t[13]*l[4]-t[14]*l[8],l[13]=-t[12]*l[1]-t[13]*l[5]-t[14]*l[9],l[14]=-t[12]*l[2]-t[13]*l[6]-t[14]*l[10],l},r.transpose=function(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]},r.interpret=function(t){var i=[t[0],t[1],t[2]],e=o(i[0]),a=s(i),h=[i[0]+e*a,i[1],i[2]],c=2/n(h);if(c>=1/0)return{translate:r.getTranslate(t),rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]};var p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];p[0]=1-c*h[0]*h[0],p[5]=1-c*h[1]*h[1],p[10]=1-c*h[2]*h[2],p[1]=-c*h[0]*h[1],p[2]=-c*h[0]*h[2],p[6]=-c*h[1]*h[2],p[4]=p[1],p[8]=p[2],p[9]=p[6];var u=r.multiply(p,t),l=[u[5],u[6]],f=o(l[0]),d=s(l),_=[l[0]+f*d,l[1]],y=2/n(_),g=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];g[5]=1-y*_[0]*_[0],g[10]=1-y*_[1]*_[1],g[6]=-y*_[0]*_[1],g[9]=g[6];var v=r.multiply(g,p),m=r.multiply(v,t),O=r.scale(m[0]<0?-1:1,m[5]<0?-1:1,m[10]<0?-1:1);m=r.multiply(m,O),v=r.multiply(O,v);var S={};return S.translate=r.getTranslate(t),S.rotate=[Math.atan2(-v[6],v[10]),Math.asin(v[2]),Math.atan2(-v[1],v[0])],S.rotate[0]||(S.rotate[0]=0,S.rotate[2]=Math.atan2(v[4],v[5])),S.scale=[m[0],m[5],m[10]],S.skew=[Math.atan2(m[9],S.scale[2]),Math.atan2(m[8],S.scale[2]),Math.atan2(m[4],S.scale[0])],Math.abs(S.rotate[0])+Math.abs(S.rotate[2])>1.5*Math.PI&&(S.rotate[1]=Math.PI-S.rotate[1],S.rotate[1]>Math.PI&&(S.rotate[1]-=2*Math.PI),S.rotate[1]<-Math.PI&&(S.rotate[1]+=2*Math.PI),S.rotate[0]<0?S.rotate[0]+=Math.PI:S.rotate[0]-=Math.PI,S.rotate[2]<0?S.rotate[2]+=Math.PI:S.rotate[2]-=Math.PI),S},r.average=function(t,i,e){e=void 0===e?.5:e;for(var n=r.interpret(t),s=r.interpret(i),o={translate:[0,0,0],rotate:[0,0,0],scale:[0,0,0],skew:[0,0,0]},a=0;3>a;a++)o.translate[a]=(1-e)*n.translate[a]+e*s.translate[a],o.rotate[a]=(1-e)*n.rotate[a]+e*s.rotate[a],o.scale[a]=(1-e)*n.scale[a]+e*s.scale[a],o.skew[a]=(1-e)*n.skew[a]+e*s.skew[a];return r.build(o)},r.build=function(t){var i=r.scale(t.scale[0],t.scale[1],t.scale[2]),e=r.skew(t.skew[0],t.skew[1],t.skew[2]),n=r.rotate(t.rotate[0],t.rotate[1],t.rotate[2]);return r.thenMove(r.multiply(r.multiply(n,e),i),t.translate)},r.equals=function(t,i){return!r.notEquals(t,i)},r.notEquals=function(t,i){return t===i?!1:!(t&&i)||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]},r.normalizeRotation=function(t){var i=t.slice(0);for((i[0]===.5*Math.PI||i[0]===.5*-Math.PI)&&(i[0]=-i[0],i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]>.5*Math.PI&&(i[0]=i[0]-Math.PI,i[1]=Math.PI-i[1],i[2]-=Math.PI),i[0]<.5*-Math.PI&&(i[0]=i[0]+Math.PI,i[1]=-Math.PI-i[1],i[2]-=Math.PI);i[1]<-Math.PI;)i[1]+=2*Math.PI;for(;i[1]>=Math.PI;)i[1]-=2*Math.PI;for(;i[2]<-Math.PI;)i[2]+=2*Math.PI;for(;i[2]>=Math.PI;)i[2]-=2*Math.PI;return i},r.inFront=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,.001,1],r.behind=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,-.001,1],e.exports=r}),define("famous/core/SpecParser",["require","exports","module","./Transform"],function(t,i,e){function n(){this.result={}}function s(t,i){return[t[0]*i[0]+t[1]*i[4]+t[2]*i[8],t[0]*i[1]+t[1]*i[5]+t[2]*i[9],t[0]*i[2]+t[1]*i[6]+t[2]*i[10]]}var o=t("./Transform");n._instance=new n,n.parse=function(t,i){return n._instance.parse(t,i)},n.prototype.parse=function(t,i){return this.reset(),this._parseSpec(t,i,o.identity),this.result},n.prototype.reset=function(){this.result={}};var r=[0,0];n.prototype._parseSpec=function(t,i,e){var n,a,h,c,p,u,l;if("number"==typeof t){if(n=t,h=i.transform,u=i.align||r,i.size&&u&&(u[0]||u[1])){var f=[u[0]*i.size[0],u[1]*i.size[1],0];h=o.thenMove(h,s(f,e))}this.result[n]={transform:h,opacity:i.opacity,origin:i.origin||r,align:i.align||r,size:i.size}}else{if(!t)return;if(t instanceof Array)for(var d=0;d<t.length;d++)this._parseSpec(t[d],i,e);else{a=t.target,h=i.transform,c=i.opacity,p=i.origin,u=i.align,l=i.size;var _=e;if(void 0!==t.opacity&&(c=i.opacity*t.opacity),t.transform&&(h=o.multiply(i.transform,t.transform)),t.origin&&(p=t.origin,_=i.transform),t.align&&(u=t.align),t.size||t.proportions){var y=l;l=[l[0],l[1]],t.size&&(void 0!==t.size[0]&&(l[0]=t.size[0]),void 0!==t.size[1]&&(l[1]=t.size[1])),t.proportions&&(void 0!==t.proportions[0]&&(l[0]=l[0]*t.proportions[0]),void 0!==t.proportions[1]&&(l[1]=l[1]*t.proportions[1])),y&&(u&&(u[0]||u[1])&&(h=o.thenMove(h,s([u[0]*y[0],u[1]*y[1],0],e))),p&&(p[0]||p[1])&&(h=o.moveThen([-p[0]*l[0],-p[1]*l[1],0],h))),_=i.transform,p=null,u=null}this._parseSpec(a,{transform:h,opacity:c,origin:p,align:u,size:l},_)}}},e.exports=n}),define("famous/core/RenderNode",["require","exports","module","./Entity","./SpecParser"],function(t,i,e){function n(t){this._object=null,this._child=null,this._hasMultipleChildren=!1,this._isRenderable=!1,this._isModifier=!1,this._resultCache={},this._prevResults={},this._childResult=null,t&&this.set(t)}function s(t,i,e){for(var n=r.parse(t,i),a=Object.keys(n),h=0;h<a.length;h++){var c=a[h],p=o.get(c),u=n[c];u.allocator=i.allocator;var l=p.commit(u);l?s(l,i,e):e[c]=u}}var o=t("./Entity"),r=t("./SpecParser");n.prototype.add=function(t){var i=t instanceof n?t:new n(t);return this._child instanceof Array?this._child.push(i):this._child?(this._child=[this._child,i],this._hasMultipleChildren=!0,this._childResult=[]):this._child=i,i},n.prototype.get=function(){return this._object||(this._hasMultipleChildren?null:this._child?this._child.get():null)},n.prototype.set=function(t){return this._childResult=null,this._hasMultipleChildren=!1,this._isRenderable=t.render?!0:!1,this._isModifier=t.modify?!0:!1,this._object=t,this._child=null,t instanceof n?t:this},n.prototype.getSize=function(){var t=null,i=this.get();return i&&i.getSize&&(t=i.getSize()),!t&&this._child&&this._child.getSize&&(t=this._child.getSize()),t},n.prototype.commit=function(t){for(var i=Object.keys(this._prevResults),e=0;e<i.length;e++){var n=i[e];if(void 0===this._resultCache[n]){var r=o.get(n);r.cleanup&&r.cleanup(t.allocator)}}this._prevResults=this._resultCache,this._resultCache={},s(this.render(),t,this._resultCache)},n.prototype.render=function(){if(this._isRenderable)return this._object.render();var t=null;if(this._hasMultipleChildren){t=this._childResult;for(var i=this._child,e=0;e<i.length;e++)t[e]=i[e].render()}else this._child&&(t=this._child.render());return this._isModifier?this._object.modify(t):t},e.exports=n}),define("famous/core/EventEmitter",["require","exports","module"],function(t,i,e){function n(){this.listeners={},this._owner=this}n.prototype.emit=function(t,i){var e=this.listeners[t];if(e)for(var n=0;n<e.length;n++)e[n].call(this._owner,i);return this},n.prototype.on=function(t,i){t in this.listeners||(this.listeners[t]=[]);var e=this.listeners[t].indexOf(i);return 0>e&&this.listeners[t].push(i),this},n.prototype.addListener=n.prototype.on,n.prototype.removeListener=function(t,i){var e=this.listeners[t];if(void 0!==e){var n=e.indexOf(i);n>=0&&e.splice(n,1)}return this},n.prototype.bindThis=function(t){this._owner=t},e.exports=n}),define("famous/core/EventHandler",["require","exports","module","./EventEmitter"],function(t,i,e){function n(){s.apply(this,arguments),this.downstream=[],this.downstreamFn=[],this.upstream=[],this.upstreamListeners={}}var s=t("./EventEmitter");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.setInputHandler=function(t,i){t.trigger=i.trigger.bind(i),i.subscribe&&i.unsubscribe&&(t.subscribe=i.subscribe.bind(i),t.unsubscribe=i.unsubscribe.bind(i))},n.setOutputHandler=function(t,i){i instanceof n&&i.bindThis(t),t.pipe=i.pipe.bind(i),t.unpipe=i.unpipe.bind(i),t.on=i.on.bind(i),t.addListener=t.on,t.removeListener=i.removeListener.bind(i)},n.prototype.emit=function(t,i){s.prototype.emit.apply(this,arguments);var e=0;for(e=0;e<this.downstream.length;e++)this.downstream[e].trigger&&this.downstream[e].trigger(t,i);for(e=0;e<this.downstreamFn.length;e++)this.downstreamFn[e](t,i);return this},n.prototype.trigger=n.prototype.emit,n.prototype.pipe=function(t){if(t.subscribe instanceof Function)return t.subscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return 0>e&&i.push(t),t instanceof Function?t("pipe",null):t.trigger&&t.trigger("pipe",null),t},n.prototype.unpipe=function(t){if(t.unsubscribe instanceof Function)return t.unsubscribe(this);var i=t instanceof Function?this.downstreamFn:this.downstream,e=i.indexOf(t);return e>=0?(i.splice(e,1),t instanceof Function?t("unpipe",null):t.trigger&&t.trigger("unpipe",null),t):!1},n.prototype.on=function(t){if(s.prototype.on.apply(this,arguments),!(t in this.upstreamListeners)){var i=this.trigger.bind(this,t);this.upstreamListeners[t]=i;for(var e=0;e<this.upstream.length;e++)this.upstream[e].on(t,i)}return this},n.prototype.addListener=n.prototype.on,n.prototype.subscribe=function(t){var i=this.upstream.indexOf(t);if(0>i){this.upstream.push(t);for(var e in this.upstreamListeners)t.on(e,this.upstreamListeners[e])}return this},n.prototype.unsubscribe=function(t){var i=this.upstream.indexOf(t);if(i>=0){this.upstream.splice(i,1);for(var e in this.upstreamListeners)t.removeListener(e,this.upstreamListeners[e])}return this},e.exports=n}),define("famous/core/ElementAllocator",["require","exports","module"],function(t,i,e){function n(t){t||(t=document.createDocumentFragment()),this.container=t,this.detachedNodes={},this.nodeCount=0}n.prototype.migrate=function(t){var i=this.container;if(t!==i){if(i instanceof DocumentFragment)t.appendChild(i);else for(;i.hasChildNodes();)t.appendChild(i.removeChild(i.firstChild));this.container=t}},n.prototype.allocate=function(t){t=t.toLowerCase(),t in this.detachedNodes||(this.detachedNodes[t]=[]);var i,e=this.detachedNodes[t];return e.length>0?i=e.pop():(i=document.createElement(t),this.container.appendChild(i)),this.nodeCount++,i},n.prototype.deallocate=function(t){var i=t.nodeName.toLowerCase(),e=this.detachedNodes[i];e.push(t),this.nodeCount--},n.prototype.getNodeCount=function(){return this.nodeCount},e.exports=n}),define("famous/utilities/Utility",["require","exports","module"],function(t,i,e){var n={};n.Direction={X:0,Y:1,Z:2},n.after=function(t,i){var e=t;return function(){e--,0===e&&i.apply(this,arguments)}},n.loadURL=function(t,i){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===this.readyState&&i&&i(this.responseText)},e.open("GET",t),e.send()},n.createDocumentFragmentFromHTML=function(t){var i=document.createElement("div");i.innerHTML=t;for(var e=document.createDocumentFragment();i.hasChildNodes();)e.appendChild(i.firstChild);return e},n.clone=function(t){var i;if("object"==typeof t){i=t instanceof Array?[]:{};for(var e in t)if("object"==typeof t[e]&&null!==t[e])if(t[e]instanceof Array){i[e]=Array(t[e].length);for(var s=0;s<t[e].length;s++)i[e][s]=n.clone(t[e][s])}else i[e]=n.clone(t[e]);else i[e]=t[e]}else i=t;return i},e.exports=n}),define("famous/transitions/MultipleTransition",["require","exports","module","../utilities/Utility"],function(t,i,e){function n(t){this.method=t,this._instances=[],this.state=[]}var s=t("../utilities/Utility");n.SUPPORTS_MULTIPLE=!0,n.prototype.get=function(){for(var t=0;t<this._instances.length;t++)this.state[t]=this._instances[t].get();return this.state},n.prototype.set=function(t,i,e){for(var n=s.after(t.length,e),o=0;o<t.length;o++)this._instances[o]||(this._instances[o]=new this.method),this._instances[o].set(t[o],i,n)},n.prototype.reset=function(t){for(var i=0;i<t.length;i++)this._instances[i]||(this._instances[i]=new this.method),this._instances[i].reset(t[i])},e.exports=n}),define("famous/transitions/TweenTransition",["require","exports","module"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._startTime=0,this._startValue=0,this._updateTime=0,this._endValue=0,this._curve=void 0,this._duration=0,this._active=!1,this._callback=void 0,this.state=0,this.velocity=void 0}function s(t,i,e){return(1-e)*t+e*i}function o(t){return t instanceof Object?t instanceof Array?t.slice(0):Object.create(t):t}function r(t,i){var e={curve:i.curve};return i.duration&&(e.duration=i.duration),i.speed&&(e.speed=i.speed),t instanceof Object&&(void 0!==t.duration&&(e.duration=t.duration),t.curve&&(e.curve=t.curve),t.speed&&(e.speed=t.speed)),"string"==typeof e.curve&&(e.curve=n.getCurve(e.curve)),e}function a(t,i,e,n,s){var o,r=1e-7,a=(e(s)-e(s-r))/r;if(t instanceof Array){o=[];for(var h=0;h<t.length;h++)o[h]="number"==typeof t[h]?a*(t[h]-i[h])/n:0}else o=a*(t-i)/n;return o}function h(t,i,e){var n;if(t instanceof Array){n=[];for(var o=0;o<t.length;o++)n[o]="number"==typeof t[o]?s(t[o],i[o],e):t[o]}else n=s(t,i,e);return n}n.Curves={linear:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return t*(2-t)},easeInOut:function(t){return.5>=t?2*t*t:-2*t*t+4*t-1},easeOutBounce:function(t){return t*(3-2*t)},spring:function(t){return(1-t)*Math.sin(6*Math.PI*t)+t}},n.SUPPORTS_MULTIPLE=!0,n.DEFAULT_OPTIONS={curve:n.Curves.linear,duration:500,speed:0};var c={};n.registerCurve=function(t,i){return c[t]?!1:(c[t]=i,!0)},n.unregisterCurve=function(t){return c[t]?(delete c[t],!0):!1},n.getCurve=function(t){var i=c[t];if(void 0!==i)return i;throw Error("curve not registered")},n.getCurves=function(){return c},n.prototype.setOptions=function(t){void 0!==t.curve&&(this.options.curve=t.curve),void 0!==t.duration&&(this.options.duration=t.duration),void 0!==t.speed&&(this.options.speed=t.speed)},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),void(e&&e());if(this._startValue=o(this.get()),i=r(i,this.options),i.speed){var n=this._startValue;if(n instanceof Object){var s=0;for(var a in n)s+=(t[a]-n[a])*(t[a]-n[a]);i.duration=Math.sqrt(s)/i.speed}else i.duration=Math.abs(t-n)/i.speed}this._startTime=Date.now(),this._endValue=o(t),this._startVelocity=o(i.velocity),this._duration=i.duration,this._curve=i.curve,this._active=!0,this._callback=e},n.prototype.reset=function(t,i){if(this._callback){var e=this._callback;this._callback=void 0,e()}this.state=o(t),this.velocity=o(i),this._startTime=0,this._duration=0,this._updateTime=0,this._startValue=this.state,this._startVelocity=this.velocity,this._endValue=this.state,this._active=!1},n.prototype.getVelocity=function(){return this.velocity},n.prototype.get=function(t){return this.update(t),this.state},n.prototype.update=function(t){if(this._active){if(t||(t=Date.now()),!(this._updateTime>=t)){this._updateTime=t;var i=t-this._startTime;if(i>=this._duration)this.state=this._endValue,this.velocity=a(this.state,this._startValue,this._curve,this._duration,1),this._active=!1;else if(0>i)this.state=this._startValue,this.velocity=this._startVelocity;else{var e=i/this._duration;this.state=h(this._startValue,this._endValue,this._curve(e)),this.velocity=a(this.state,this._startValue,this._curve,this._duration,e)}}}else if(this._callback){var n=this._callback;this._callback=void 0,n()}},n.prototype.isActive=function(){return this._active},n.prototype.halt=function(){this.reset(this.get())},n.registerCurve("linear",n.Curves.linear),n.registerCurve("easeIn",n.Curves.easeIn),n.registerCurve("easeOut",n.Curves.easeOut),n.registerCurve("easeInOut",n.Curves.easeInOut),n.registerCurve("easeOutBounce",n.Curves.easeOutBounce),n.registerCurve("spring",n.Curves.spring),n.customCurve=function(t,i){return t=t||0,i=i||0,function(e){return t*e+(-2*t-i+3)*e*e+(t+i-2)*e*e*e}},e.exports=n}),define("famous/transitions/Transitionable",["require","exports","module","./MultipleTransition","./TweenTransition"],function(t,i,e){function n(t){this.currentAction=null,this.actionQueue=[],this.callbackQueue=[],this.state=0,this.velocity=void 0,this._callback=void 0,this._engineInstance=null,this._currentMethod=null,this.set(t)}function s(){if(this._callback){var t=this._callback;this._callback=void 0,t()}if(this.actionQueue.length<=0)return void this.set(this.get());this.currentAction=this.actionQueue.shift(),this._callback=this.callbackQueue.shift();var i=null,e=this.currentAction[0],n=this.currentAction[1];n instanceof Object&&n.method?(i=n.method,"string"==typeof i&&(i=a[i])):i=r,this._currentMethod!==i&&(this._engineInstance=!(e instanceof Object)||i.SUPPORTS_MULTIPLE===!0||e.length<=i.SUPPORTS_MULTIPLE?new i:new o(i),this._currentMethod=i),this._engineInstance.reset(this.state,this.velocity),void 0!==this.velocity&&(n.velocity=this.velocity),this._engineInstance.set(e,n,s.bind(this))}var o=t("./MultipleTransition"),r=t("./TweenTransition"),a={};n.register=function(t){var i=!0;for(var e in t)n.registerMethod(e,t[e])||(i=!1);return i},n.registerMethod=function(t,i){return t in a?!1:(a[t]=i,!0)},n.unregisterMethod=function(t){return t in a?(delete a[t],!0):!1},n.prototype.set=function(t,i,e){if(!i)return this.reset(t),e&&e(),this;var n=[t,i];return this.actionQueue.push(n),this.callbackQueue.push(e),this.currentAction||s.call(this),this},n.prototype.reset=function(t,i){this._currentMethod=null,this._engineInstance=null,this._callback=void 0,this.state=t,this.velocity=i,this.currentAction=null,this.actionQueue=[],this.callbackQueue=[]},n.prototype.delay=function(t,i){this.set(this.get(),{duration:t,curve:function(){return 0}},i)},n.prototype.get=function(t){return this._engineInstance&&(this._engineInstance.getVelocity&&(this.velocity=this._engineInstance.getVelocity()),this.state=this._engineInstance.get(t)),this.state},n.prototype.isActive=function(){return!!this.currentAction},n.prototype.halt=function(){return this.set(this.get())},e.exports=n}),define("famous/core/Context",["require","exports","module","./RenderNode","./EventHandler","./ElementAllocator","./Transform","../transitions/Transitionable"],function(t,i,e){function n(t){return[t.clientWidth,t.clientHeight]}function s(t){this.container=t,this._allocator=new a(t),this._node=new o,this._eventOutput=new r,this._size=n(this.container),this._perspectiveState=new c(0),this._perspective=void 0,this._nodeContext={allocator:this._allocator,transform:h.identity,opacity:1,origin:p,align:p,size:this._size},this._eventOutput.on("resize",function(){this.setSize(n(this.container))}.bind(this))}var o=t("./RenderNode"),r=t("./EventHandler"),a=t("./ElementAllocator"),h=t("./Transform"),c=t("../transitions/Transitionable"),p=[0,0],u=!("perspective"in document.documentElement.style),l=u?function(t,i){t.style.webkitPerspective=i?i.toFixed()+"px":""}:function(t,i){t.style.perspective=i?i.toFixed()+"px":""};s.prototype.getAllocator=function(){return this._allocator},s.prototype.add=function(t){return this._node.add(t)},s.prototype.migrate=function(t){t!==this.container&&(this.container=t,this._allocator.migrate(t))},s.prototype.getSize=function(){return this._size},s.prototype.setSize=function(t){t||(t=n(this.container)),this._size[0]=t[0],this._size[1]=t[1]},s.prototype.update=function(t){t&&(t.transform&&(this._nodeContext.transform=t.transform),t.opacity&&(this._nodeContext.opacity=t.opacity),t.origin&&(this._nodeContext.origin=t.origin),t.align&&(this._nodeContext.align=t.align),t.size&&(this._nodeContext.size=t.size));var i=this._perspectiveState.get();i!==this._perspective&&(l(this.container,i),this._perspective=i),this._node.commit(this._nodeContext)},s.prototype.getPerspective=function(){return this._perspectiveState.get()},s.prototype.setPerspective=function(t,i,e){return this._perspectiveState.set(t,i,e)},s.prototype.emit=function(t,i){return this._eventOutput.emit(t,i)},s.prototype.on=function(t,i){return this._eventOutput.on(t,i)},s.prototype.removeListener=function(t,i){return this._eventOutput.removeListener(t,i)},s.prototype.pipe=function(t){return this._eventOutput.pipe(t)},s.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},e.exports=s}),define("famous/core/ElementOutput",["require","exports","module","./Entity","./EventHandler","./Transform"],function(t,i,e){function n(t){this._matrix=null,this._opacity=1,this._origin=null,this._size=null,this._eventOutput=new p,this._eventOutput.bindThis(this),this.eventForwarder=function(t){this._eventOutput.emit(t.type,t)}.bind(this),this.id=c.register(this),this._element=null,this._sizeDirty=!1,this._originDirty=!1,this._transformDirty=!1,this._invisible=!1,t&&this.attach(t)}function s(t){for(var i in this._eventOutput.listeners)t.addEventListener(i,this.eventForwarder)}function o(t){for(var i in this._eventOutput.listeners)t.removeEventListener(i,this.eventForwarder)}function r(t){t[12]=Math.round(t[12]*f)/f,t[13]=Math.round(t[13]*f)/f;for(var i="matrix3d(",e=0;15>e;e++)i+=t[e]<1e-6&&t[e]>-1e-6?"0,":t[e]+",";return i+=t[15]+")"}function a(t){return 100*t[0]+"% "+100*t[1]+"%"}function h(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var c=t("./Entity"),p=t("./EventHandler"),u=t("./Transform"),l=!("transform"in document.documentElement.style),f=window.devicePixelRatio||1;n.prototype.on=function(t,i){this._element&&this._element.addEventListener(t,this.eventForwarder),this._eventOutput.on(t,i)},n.prototype.removeListener=function(t,i){this._eventOutput.removeListener(t,i)},n.prototype.emit=function(t,i){i&&!i.origin&&(i.origin=this);var e=this._eventOutput.emit(t,i);return e&&i&&i.stopPropagation&&i.stopPropagation(),e},n.prototype.pipe=function(t){return this._eventOutput.pipe(t)},n.prototype.unpipe=function(t){return this._eventOutput.unpipe(t)},n.prototype.render=function(){return this.id};var d;d=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(t,i){t.style.zIndex=1e6*i[14]|0,t.style.transform=r(i)}:l?function(t,i){t.style.webkitTransform=r(i)}:function(t,i){t.style.transform=r(i)};var _=l?function(t,i){t.style.webkitTransformOrigin=a(i)}:function(t,i){t.style.transformOrigin=a(i)},y=l?function(t){t.style.webkitTransform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0}:function(t){t.style.transform="scale3d(0.0001,0.0001,0.0001)",t.style.opacity=0};n.prototype.commit=function(t){var i=this._element;if(i){{var e=t.transform,n=t.opacity,s=t.origin;t.size}if(!e&&this._matrix)return this._matrix=null,this._opacity=0,void y(i);if(h(this._origin,s)&&(this._originDirty=!0),u.notEquals(this._matrix,e)&&(this._transformDirty=!0),this._invisible&&(this._invisible=!1,this._element.style.display=""),this._opacity!==n&&(this._opacity=n,i.style.opacity=n>=1?"0.999999":n),this._transformDirty||this._originDirty||this._sizeDirty){this._sizeDirty&&(this._sizeDirty=!1),this._originDirty&&(s?(this._origin||(this._origin=[0,0]),this._origin[0]=s[0],this._origin[1]=s[1]):this._origin=null,_(i,this._origin),this._originDirty=!1),e||(e=u.identity),this._matrix=e;var o=this._size?u.thenMove(e,[-this._size[0]*s[0],-this._size[1]*s[1],0]):e;d(i,o),this._transformDirty=!1}}},n.prototype.cleanup=function(){this._element&&(this._invisible=!0,this._element.style.display="none")},n.prototype.attach=function(t){this._element=t,s.call(this,t)},n.prototype.detach=function(){var t=this._element;return t&&(o.call(this,t),this._invisible&&(this._invisible=!1,this._element.style.display="")),this._element=null,t},e.exports=n}),define("famous/core/OptionsManager",["require","exports","module","./EventHandler"],function(t,i,e){function n(t){this._value=t,this.eventOutput=null}function s(){this.eventOutput=new o,this.eventOutput.bindThis(this),o.setOutputHandler(this,this.eventOutput)}var o=t("./EventHandler");n.patch=function(t){for(var i=new n(t),e=1;e<arguments.length;e++)i.patch(arguments[e]);return t},n.prototype.patch=function(){for(var t=this._value,i=0;i<arguments.length;i++){var e=arguments[i];for(var n in e)n in t&&e[n]&&e[n].constructor===Object&&t[n]&&t[n].constructor===Object?(t.hasOwnProperty(n)||(t[n]=Object.create(t[n])),this.key(n).patch(e[n]),this.eventOutput&&this.eventOutput.emit("change",{id:n,value:this.key(n).value()})):this.set(n,e[n])}return this},n.prototype.setOptions=n.prototype.patch,n.prototype.key=function(t){var i=new n(this._value[t]);return(!(i._value instanceof Object)||i._value instanceof Array)&&(i._value={}),i},n.prototype.get=function(t){return t?this._value[t]:this._value},n.prototype.getOptions=n.prototype.get,n.prototype.set=function(t,i){var e=this.get(t);return this._value[t]=i,this.eventOutput&&i!==e&&this.eventOutput.emit("change",{id:t,value:i}),this},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)},e.exports=n}),define("famous/core/Engine",["require","exports","module","./Context","./EventHandler","./OptionsManager"],function(t,i,e){function n(){m.runLoop?(u.step(),window.requestAnimationFrame(n)):y=!1}function s(){for(var t=0;t<l.length;t++)l[t].emit("resize");v.emit("resize")}function o(){window.addEventListener("touchmove",function(t){t.preventDefault()},!0),document.body.classList.add("famous-root"),document.documentElement.classList.add("famous-root")}var r,a,h=t("./Context"),c=t("./EventHandler"),p=t("./OptionsManager"),u={},l=[],f=[],d=[],_=Date.now(),y=!0,g={},v=new c,m={containerType:"div",containerClass:"famous-container",fpsCap:void 0,runLoop:!0,appMode:!0},O=new p(m),S=10;u.step=function(){var t=Date.now();if(!(a&&a>t-_)){var i=0;for(r=t-_,_=t,v.emit("prerender"),i=0;i<f.length;i++)f[i].call(this);for(f.splice(0);d.length&&Date.now()-t<S;)d.shift().call(this);for(i=0;i<l.length;i++)l[i].update();v.emit("postrender")}},window.requestAnimationFrame(n),window.addEventListener("resize",s,!1),s();var T=!1;u.pipe=function(t){return t.subscribe instanceof Function?t.subscribe(u):v.pipe(t)},u.unpipe=function(t){return t.unsubscribe instanceof Function?t.unsubscribe(u):v.unpipe(t)},u.on=function(t,i){return t in g||(g[t]=v.emit.bind(v,t),document.body?document.body.addEventListener(t,g[t]):u.nextTick(function(t,i){document.body.addEventListener(t,i)}.bind(this,t,g[t]))),v.on(t,i)},u.emit=function(t,i){return v.emit(t,i)},u.removeListener=function(t,i){return v.removeListener(t,i)},u.getFPS=function(){return 1e3/r},u.setFPSCap=function(t){a=Math.floor(1e3/t)},u.getOptions=function(t){return O.getOptions(t)},u.setOptions=function(){return O.setOptions.apply(O,arguments)},u.createContext=function(t){!T&&m.appMode&&u.nextTick(o);var i=!1;t||(t=document.createElement(m.containerType),t.classList.add(m.containerClass),i=!0);var e=new h(t);return u.registerContext(e),i&&u.nextTick(function(t,i){document.body.appendChild(i),t.emit("resize")}.bind(this,e,t)),e},u.registerContext=function(t){return l.push(t),t},u.getContexts=function(){return l},u.deregisterContext=function(t){var i=l.indexOf(t);i>=0&&l.splice(i,1)},u.nextTick=function(t){f.push(t)},u.defer=function(t){d.push(t)},O.on("change",function(t){"fpsCap"===t.id?u.setFPSCap(t.value):"runLoop"===t.id&&!y&&t.value&&(y=!0,window.requestAnimationFrame(n))}),e.exports=u}),define("famous/core/Surface",["require","exports","module","./ElementOutput"],function(t,i,e){function n(t){p.call(this),this.options={},this.properties={},this.attributes={},this.content="",this.classList=[],this.size=null,this._classesDirty=!0,this._stylesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._trueSizeCheck=!0,this._dirtyClasses=[],t&&this.setOptions(t),this._currentTarget=null}function s(t){for(var i=0;i<this._dirtyClasses.length;i++)t.classList.remove(this._dirtyClasses[i]);this._dirtyClasses=[]}function o(t){for(var i in this.properties)t.style[i]=this.properties[i]}function r(t){for(var i in this.properties)t.style[i]=""}function a(t){for(var i in this.attributes)t.setAttribute(i,this.attributes[i])}function h(t){for(var i in this.attributes)t.removeAttribute(i)}function c(t,i){return t&&i?t[0]!==i[0]||t[1]!==i[1]:t!==i}var p=t("./ElementOutput");n.prototype=Object.create(p.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.setAttributes=function(t){for(var i in t){if("style"===i)throw Error('Cannot set styles via "setAttributes" as it will break Famo.us.  Use "setProperties" instead.');this.attributes[i]=t[i]
}this._attributesDirty=!0},n.prototype.getAttributes=function(){return this.attributes},n.prototype.setProperties=function(t){for(var i in t)this.properties[i]=t[i];return this._stylesDirty=!0,this},n.prototype.getProperties=function(){return this.properties},n.prototype.addClass=function(t){return this.classList.indexOf(t)<0&&(this.classList.push(t),this._classesDirty=!0),this},n.prototype.removeClass=function(t){var i=this.classList.indexOf(t);return i>=0&&(this._dirtyClasses.push(this.classList.splice(i,1)[0]),this._classesDirty=!0),this},n.prototype.toggleClass=function(t){var i=this.classList.indexOf(t);return i>=0?this.removeClass(t):this.addClass(t),this},n.prototype.setClasses=function(t){var i=0,e=[];for(i=0;i<this.classList.length;i++)t.indexOf(this.classList[i])<0&&e.push(this.classList[i]);for(i=0;i<e.length;i++)this.removeClass(e[i]);for(i=0;i<t.length;i++)this.addClass(t[i]);return this},n.prototype.getClassList=function(){return this.classList},n.prototype.setContent=function(t){return this.content!==t&&(this.content=t,this._contentDirty=!0),this},n.prototype.getContent=function(){return this.content},n.prototype.setOptions=function(t){return t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.attributes&&this.setAttributes(t.attributes),t.content&&this.setContent(t.content),this},n.prototype.setup=function(t){var i=t.allocate(this.elementType);if(this.elementClass)if(this.elementClass instanceof Array)for(var e=0;e<this.elementClass.length;e++)i.classList.add(this.elementClass[e]);else i.classList.add(this.elementClass);i.style.display="",this.attach(i),this._opacity=null,this._currentTarget=i,this._stylesDirty=!0,this._classesDirty=!0,this._attributesDirty=!0,this._sizeDirty=!0,this._contentDirty=!0,this._originDirty=!0,this._transformDirty=!0},n.prototype.commit=function(t){this._currentTarget||this.setup(t.allocator);var i=this._currentTarget,e=t.size;if(this._classesDirty){s.call(this,i);for(var n=this.getClassList(),r=0;r<n.length;r++)i.classList.add(n[r]);this._classesDirty=!1,this._trueSizeCheck=!0}if(this._stylesDirty&&(o.call(this,i),this._stylesDirty=!1,this._trueSizeCheck=!0),this._attributesDirty&&(a.call(this,i),this._attributesDirty=!1,this._trueSizeCheck=!0),this.size){var h=t.size;if(e=[this.size[0],this.size[1]],void 0===e[0]&&(e[0]=h[0]),void 0===e[1]&&(e[1]=h[1]),e[0]===!0||e[1]===!0){if(e[0]!==!0||!this._trueSizeCheck&&0!==this._size[0])this._size&&(e[0]=this._size[0]);else{var u=i.offsetWidth;this._size&&this._size[0]!==u&&(this._size[0]=u,this._sizeDirty=!0),e[0]=u}if(e[1]!==!0||!this._trueSizeCheck&&0!==this._size[1])this._size&&(e[1]=this._size[1]);else{var l=i.offsetHeight;this._size&&this._size[1]!==l&&(this._size[1]=l,this._sizeDirty=!0),e[1]=l}this._trueSizeCheck=!1}}c(this._size,e)&&(this._size||(this._size=[0,0]),this._size[0]=e[0],this._size[1]=e[1],this._sizeDirty=!0),this._sizeDirty&&(this._size&&(i.style.width=this.size&&this.size[0]===!0?"":this._size[0]+"px",i.style.height=this.size&&this.size[1]===!0?"":this._size[1]+"px"),this._eventOutput.emit("resize")),this._contentDirty&&(this.deploy(i),this._eventOutput.emit("deploy"),this._contentDirty=!1,this._trueSizeCheck=!0),p.prototype.commit.call(this,t)},n.prototype.cleanup=function(t){var i=0,e=this._currentTarget;this._eventOutput.emit("recall"),this.recall(e),e.style.display="none",e.style.opacity="",e.style.width="",e.style.height="",r.call(this,e),h.call(this,e);var n=this.getClassList();for(s.call(this,e),i=0;i<n.length;i++)e.classList.remove(n[i]);if(this.elementClass)if(this.elementClass instanceof Array)for(i=0;i<this.elementClass.length;i++)e.classList.remove(this.elementClass[i]);else e.classList.remove(this.elementClass);this.detach(e),this._currentTarget=null,t.deallocate(e)},n.prototype.deploy=function(t){var i=this.getContent();if(i instanceof Node){for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}else t.innerHTML=i},n.prototype.recall=function(t){for(var i=document.createDocumentFragment();t.hasChildNodes();)i.appendChild(t.firstChild);this.setContent(i)},n.prototype.getSize=function(){return this._size?this._size:this.size},n.prototype.setSize=function(t){return this.size=t?[t[0],t[1]]:null,this._sizeDirty=!0,this},e.exports=n}),define("famous/core/Group",["require","exports","module","./Context","./Transform","./Surface"],function(t,i,e){function n(t){r.call(this,t),this._shouldRecalculateSize=!1,this._container=document.createDocumentFragment(),this.context=new s(this._container),this.setContent(this._container),this._groupSize=[void 0,void 0]}var s=t("./Context"),o=t("./Transform"),r=t("./Surface");n.SIZE_ZERO=[0,0],n.prototype=Object.create(r.prototype),n.prototype.elementType="div",n.prototype.elementClass="famous-group",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return r.prototype.render.call(this)},n.prototype.deploy=function(t){this.context.migrate(t)},n.prototype.recall=function(){this._container=document.createDocumentFragment(),this.context.migrate(this._container)},n.prototype.commit=function(t){var i=t.transform,e=t.origin,s=t.opacity,a=t.size,h=r.prototype.commit.call(this,{allocator:t.allocator,transform:o.thenMove(i,[-e[0]*a[0],-e[1]*a[1],0]),opacity:s,origin:e,size:n.SIZE_ZERO});return(a[0]!==this._groupSize[0]||a[1]!==this._groupSize[1])&&(this._groupSize[0]=a[0],this._groupSize[1]=a[1],this.context.setSize(a)),this.context.update({transform:o.translate(-e[0]*a[0],-e[1]*a[1],0),origin:e,size:a}),h},e.exports=n}),define("famous/transitions/TransitionableTransform",["require","exports","module","./Transitionable","../core/Transform","../utilities/Utility"],function(t,i,e){function n(t){this._final=a.identity.slice(),this._finalTranslate=[0,0,0],this._finalRotate=[0,0,0],this._finalSkew=[0,0,0],this._finalScale=[1,1,1],this.translate=new r(this._finalTranslate),this.rotate=new r(this._finalRotate),this.skew=new r(this._finalSkew),this.scale=new r(this._finalScale),t&&this.set(t)}function s(){return a.build({translate:this.translate.get(),rotate:this.rotate.get(),skew:this.skew.get(),scale:this.scale.get()})}function o(){return a.build({translate:this._finalTranslate,rotate:this._finalRotate,skew:this._finalSkew,scale:this._finalScale})}var r=t("./Transitionable"),a=t("../core/Transform"),h=t("../utilities/Utility");n.prototype.setTranslate=function(t,i,e){return this._finalTranslate=t,this._final=o.call(this),this.translate.set(t,i,e),this},n.prototype.setScale=function(t,i,e){return this._finalScale=t,this._final=o.call(this),this.scale.set(t,i,e),this},n.prototype.setRotate=function(t,i,e){return this._finalRotate=t,this._final=o.call(this),this.rotate.set(t,i,e),this},n.prototype.setSkew=function(t,i,e){return this._finalSkew=t,this._final=o.call(this),this.skew.set(t,i,e),this},n.prototype.set=function(t,i,e){var n=a.interpret(t);this._finalTranslate=n.translate,this._finalRotate=n.rotate,this._finalSkew=n.skew,this._finalScale=n.scale,this._final=t;var s=e?h.after(4,e):null;return this.translate.set(n.translate,i,s),this.rotate.set(n.rotate,i,s),this.skew.set(n.skew,i,s),this.scale.set(n.scale,i,s),this},n.prototype.setDefaultTransition=function(t){this.translate.setDefault(t),this.rotate.setDefault(t),this.skew.setDefault(t),this.scale.setDefault(t)},n.prototype.get=function(){return this.isActive()?s.call(this):this._final},n.prototype.getFinal=function(){return this._final},n.prototype.isActive=function(){return this.translate.isActive()||this.rotate.isActive()||this.scale.isActive()||this.skew.isActive()},n.prototype.halt=function(){return this.translate.halt(),this.rotate.halt(),this.skew.halt(),this.scale.halt(),this._final=this.get(),this._finalTranslate=this.translate.get(),this._finalRotate=this.rotate.get(),this._finalSkew=this.skew.get(),this._finalScale=this.scale.get(),this},e.exports=n}),define("famous/core/Modifier",["require","exports","module","./Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,i,e){function n(t){this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null,this._legacyStates={},this._output={transform:o.identity,opacity:1,origin:null,align:null,size:null,proportions:null,target:null},t&&(t.transform&&this.transformFrom(t.transform),void 0!==t.opacity&&this.opacityFrom(t.opacity),t.origin&&this.originFrom(t.origin),t.align&&this.alignFrom(t.align),t.size&&this.sizeFrom(t.size),t.proportions&&this.proportionsFrom(t.proportions))}function s(){this._transformGetter&&(this._output.transform=this._transformGetter()),this._opacityGetter&&(this._output.opacity=this._opacityGetter()),this._originGetter&&(this._output.origin=this._originGetter()),this._alignGetter&&(this._output.align=this._alignGetter()),this._sizeGetter&&(this._output.size=this._sizeGetter()),this._proportionGetter&&(this._output.proportions=this._proportionGetter())}var o=t("./Transform"),r=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");n.prototype.transformFrom=function(t){return t instanceof Function?this._transformGetter=t:t instanceof Object&&t.get?this._transformGetter=t.get.bind(t):(this._transformGetter=null,this._output.transform=t),this},n.prototype.opacityFrom=function(t){return t instanceof Function?this._opacityGetter=t:t instanceof Object&&t.get?this._opacityGetter=t.get.bind(t):(this._opacityGetter=null,this._output.opacity=t),this},n.prototype.originFrom=function(t){return t instanceof Function?this._originGetter=t:t instanceof Object&&t.get?this._originGetter=t.get.bind(t):(this._originGetter=null,this._output.origin=t),this},n.prototype.alignFrom=function(t){return t instanceof Function?this._alignGetter=t:t instanceof Object&&t.get?this._alignGetter=t.get.bind(t):(this._alignGetter=null,this._output.align=t),this},n.prototype.sizeFrom=function(t){return t instanceof Function?this._sizeGetter=t:t instanceof Object&&t.get?this._sizeGetter=t.get.bind(t):(this._sizeGetter=null,this._output.size=t),this},n.prototype.proportionsFrom=function(t){return t instanceof Function?this._proportionGetter=t:t instanceof Object&&t.get?this._proportionGetter=t.get.bind(t):(this._proportionGetter=null,this._output.proportions=t),this},n.prototype.setTransform=function(t,i,e){return i||this._legacyStates.transform?(this._legacyStates.transform||(this._legacyStates.transform=new a(this._output.transform)),this._transformGetter||this.transformFrom(this._legacyStates.transform),this._legacyStates.transform.set(t,i,e),this):this.transformFrom(t)},n.prototype.setOpacity=function(t,i,e){return i||this._legacyStates.opacity?(this._legacyStates.opacity||(this._legacyStates.opacity=new r(this._output.opacity)),this._opacityGetter||this.opacityFrom(this._legacyStates.opacity),this._legacyStates.opacity.set(t,i,e)):this.opacityFrom(t)},n.prototype.setOrigin=function(t,i,e){return i||this._legacyStates.origin?(this._legacyStates.origin||(this._legacyStates.origin=new r(this._output.origin||[0,0])),this._originGetter||this.originFrom(this._legacyStates.origin),this._legacyStates.origin.set(t,i,e),this):this.originFrom(t)},n.prototype.setAlign=function(t,i,e){return i||this._legacyStates.align?(this._legacyStates.align||(this._legacyStates.align=new r(this._output.align||[0,0])),this._alignGetter||this.alignFrom(this._legacyStates.align),this._legacyStates.align.set(t,i,e),this):this.alignFrom(t)},n.prototype.setSize=function(t,i,e){return t&&(i||this._legacyStates.size)?(this._legacyStates.size||(this._legacyStates.size=new r(this._output.size||[0,0])),this._sizeGetter||this.sizeFrom(this._legacyStates.size),this._legacyStates.size.set(t,i,e),this):this.sizeFrom(t)},n.prototype.setProportions=function(t,i,e){return t&&(i||this._legacyStates.proportions)?(this._legacyStates.proportions||(this._legacyStates.proportions=new r(this._output.proportions||[0,0])),this._proportionGetter||this.proportionsFrom(this._legacyStates.proportions),this._legacyStates.proportions.set(t,i,e),this):this.proportionsFrom(t)},n.prototype.halt=function(){this._legacyStates.transform&&this._legacyStates.transform.halt(),this._legacyStates.opacity&&this._legacyStates.opacity.halt(),this._legacyStates.origin&&this._legacyStates.origin.halt(),this._legacyStates.align&&this._legacyStates.align.halt(),this._legacyStates.size&&this._legacyStates.size.halt(),this._legacyStates.proportions&&this._legacyStates.proportions.halt(),this._transformGetter=null,this._opacityGetter=null,this._originGetter=null,this._alignGetter=null,this._sizeGetter=null,this._proportionGetter=null},n.prototype.getTransform=function(){return this._transformGetter()},n.prototype.getFinalTransform=function(){return this._legacyStates.transform?this._legacyStates.transform.getFinal():this._output.transform},n.prototype.getOpacity=function(){return this._opacityGetter()},n.prototype.getOrigin=function(){return this._originGetter()},n.prototype.getAlign=function(){return this._alignGetter()},n.prototype.getSize=function(){return this._sizeGetter?this._sizeGetter():this._output.size},n.prototype.getProportions=function(){return this._proportionGetter?this._proportionGetter():this._output.proportions},n.prototype.modify=function(t){return s.call(this),this._output.target=t,this._output},e.exports=n}),define("famous/core/Scene",["require","exports","module","./Transform","./Modifier","./RenderNode"],function(t,i,e){function n(t){this.id=null,this._objects=null,this.node=new p,this._definition=null,t&&this.load(t)}function s(t){for(var i in u)if(i in t){var e=t[i];return e instanceof Array||(e=[e]),u[i].apply(this,e)}}function o(t){var i=t.transform,e=t.opacity,n=t.origin,o=t.align,r=t.size,a=h.identity;if(i instanceof Array)if(16===i.length&&"number"==typeof i[0])a=i;else for(var p=0;p<i.length;p++)a=h.multiply(a,s(i[p]));else i instanceof Function?a=i:i instanceof Object&&(a=s(i));var u=new c({transform:a,opacity:e,origin:n,align:o,size:r});return u}function r(t){for(var i=new p,e=0;e<t.length;e++){var n=a.call(this,t[e]);n&&i.add(n)}return i}function a(t){var i,e;if(t instanceof Array)i=r.call(this,t);else if(e=this._objects.length,t.render&&t.render instanceof Function)i=t;else if(t.target){var n=a.call(this,t.target),s=o.call(this,t);i=new p(s),i.add(n),t.id&&(this.id[t.id]=s)}else t.id&&(i=new p,this.id[t.id]=i);return this._objects[e]=i,i}var h=t("./Transform"),c=t("./Modifier"),p=t("./RenderNode"),u={translate:h.translate,rotate:h.rotate,rotateX:h.rotateX,rotateY:h.rotateY,rotateZ:h.rotateZ,rotateAxis:h.rotateAxis,scale:h.scale,skew:h.skew,matrix3d:function(){return arguments}};n.prototype.create=function(){return new n(this._definition)},n.prototype.load=function(t){this._definition=t,this.id={},this._objects=[],this.node.set(a.call(this,t))},n.prototype.add=function(){return this.node.add.apply(this.node,arguments)},n.prototype.render=function(){return this.node.render.apply(this.node,arguments)},e.exports=n}),define("famous/core/View",["require","exports","module","./EventHandler","./OptionsManager","./RenderNode","../utilities/Utility"],function(t,i,e){function n(t){this._node=new r,this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.options=a.clone(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t)}var s=t("./EventHandler"),o=t("./OptionsManager"),r=t("./RenderNode"),a=t("../utilities/Utility");n.DEFAULT_OPTIONS={},n.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},n.prototype.setOptions=function(t){this._optionsManager.patch(t)},n.prototype.add=function(){return this._node.add.apply(this._node,arguments)},n.prototype._add=n.prototype.add,n.prototype.render=function(){return this._node.render()},n.prototype.getSize=function(){return this._node&&this._node.getSize?this._node.getSize.apply(this._node,arguments)||this.options.size:this.options.size},e.exports=n}),define("famous/core/ViewSequence",["require","exports","module"],function(t,i,e){function n(t){t||(t=[]),t instanceof Array&&(t={array:t}),this._=null,this.index=t.index||0,t.array?this._=new this.constructor.Backing(t.array):t._&&(this._=t._),this.index===this._.firstIndex&&(this._.firstNode=this),this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),void 0!==t.loop&&(this._.loop=t.loop),void 0!==t.trackSize&&(this._.trackSize=t.trackSize),this._previousNode=null,this._nextNode=null}n.Backing=function(t){this.array=t,this.firstIndex=0,this.loop=!1,this.firstNode=null,this.lastNode=null,this.cumulativeSizes=[[0,0]],this.sizeDirty=!0,this.trackSize=!1},n.Backing.prototype.getValue=function(t){var i=t-this.firstIndex;return 0>i||i>=this.array.length?null:this.array[i]},n.Backing.prototype.setValue=function(t,i){this.array[t-this.firstIndex]=i},n.Backing.prototype.getSize=function(t){return this.cumulativeSizes[t]},n.Backing.prototype.calculateSize=function(t){t=t||this.array.length;for(var i=[0,0],e=0;t>e;e++){var n=this.array[e].getSize();if(!n)return void 0;void 0!==i[0]&&(void 0===n[0]?i[0]=void 0:i[0]+=n[0]),void 0!==i[1]&&(void 0===n[1]?i[1]=void 0:i[1]+=n[1]),this.cumulativeSizes[e+1]=i.slice()}return this.sizeDirty=!1,i},n.Backing.prototype.reindex=function(t,i,e){if(this.array[0]){for(var n=0,s=this.firstIndex,o=e-i,r=this.firstNode;t-1>s;)r=r.getNext(),s++;var a=r;for(n=0;i>n;n++)r=r.getNext(),r&&(r._previousNode=a);var h=r?r.getNext():null;for(a._nextNode=null,r=a,n=0;e>n;n++)r=r.getNext();if(s+=e,r!==h&&(r._nextNode=h,h&&(h._previousNode=r)),h)for(r=h,s++;r&&s<this.array.length+this.firstIndex;)r._nextNode?r.index+=o:r.index=s,r=r.getNext(),s++;this.trackSize&&(this.sizeDirty=!0)}},n.prototype.getPrevious=function(){var t=this._.array.length;return t?this.index===this._.firstIndex?this._.loop?(this._previousNode=this._.lastNode||new this.constructor({_:this._,index:this._.firstIndex+t-1}),this._previousNode._nextNode=this):this._previousNode=null:this._previousNode||(this._previousNode=new this.constructor({_:this._,index:this.index-1}),this._previousNode._nextNode=this):this._previousNode=null,this._previousNode},n.prototype.getNext=function(){var t=this._.array.length;return t?this.index===this._.firstIndex+t-1?this._.loop?(this._nextNode=this._.firstNode||new this.constructor({_:this._,index:this._.firstIndex}),this._nextNode._previousNode=this):this._nextNode=null:this._nextNode||(this._nextNode=new this.constructor({_:this._,index:this.index+1}),this._nextNode._previousNode=this):this._nextNode=null,this._nextNode},n.prototype.indexOf=function(t){return this._.array.indexOf(t)},n.prototype.getIndex=function(){return this.index},n.prototype.toString=function(){return""+this.index},n.prototype.unshift=function(){this._.array.unshift.apply(this._.array,arguments),this._.firstIndex-=arguments.length,this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.push=function(){this._.array.push.apply(this._.array,arguments),this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.splice=function(t,i){var e=Array.prototype.slice.call(arguments,2);this._.array.splice.apply(this._.array,[t-this._.firstIndex,i].concat(e)),this._.reindex(t,i,e.length)},n.prototype.swap=function(t){var i=t.get(),e=this.get();this._.setValue(this.index,i),this._.setValue(t.index,e);var n=this._previousNode,s=this._nextNode,o=this.index,r=t._previousNode,a=t._nextNode,h=t.index;this.index=h,this._previousNode=r===this?t:r,this._previousNode&&(this._previousNode._nextNode=this),this._nextNode=a===this?t:a,this._nextNode&&(this._nextNode._previousNode=this),t.index=o,t._previousNode=n===t?this:n,t._previousNode&&(t._previousNode._nextNode=t),t._nextNode=s===t?this:s,t._nextNode&&(t._nextNode._previousNode=t),this.index===this._.firstIndex?this._.firstNode=this:this.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=this),t.index===this._.firstIndex?this._.firstNode=t:t.index===this._.firstIndex+this._.array.length-1&&(this._.lastNode=t),this._.trackSize&&(this._.sizeDirty=!0)},n.prototype.get=function(){return this._.getValue(this.index)},n.prototype.getSize=function(){var t=this.get();return t?t.getSize():null},n.prototype.render=function(){this._.trackSize&&this._.sizeDirty&&this._.calculateSize();var t=this.get();return t?t.render.apply(t,arguments):null},e.exports=n}),define("famous/events/EventArbiter",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t){this.dispatchers={},this.currMode=void 0,this.setMode(t)}var s=t("../core/EventHandler");n.prototype.setMode=function(t){if(t!==this.currMode){var i=this.currMode;this.dispatchers[this.currMode]&&this.dispatchers[this.currMode].trigger("unpipe"),this.currMode=t,this.dispatchers[t]&&this.dispatchers[t].emit("pipe"),this.emit("change",{from:i,to:t})}},n.prototype.forMode=function(t){return this.dispatchers[t]||(this.dispatchers[t]=new s),this.dispatchers[t]},n.prototype.emit=function(t,i){if(void 0===this.currMode)return!1;i||(i={});var e=this.dispatchers[this.currMode];return e?e.trigger(t,i):void 0},e.exports=n}),define("famous/events/EventFilter",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t){s.call(this),this._condition=t}var s=t("../core/EventHandler");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.emit=function(t,i){return this._condition(t,i)?s.prototype.emit.apply(this,arguments):void 0},n.prototype.trigger=n.prototype.emit,e.exports=n}),define("famous/events/EventMapper",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t){s.call(this),this._mappingFunction=t}var s=t("../core/EventHandler");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.subscribe=null,n.prototype.unsubscribe=null,n.prototype.emit=function(t,i){var e=this._mappingFunction.apply(this,arguments);e&&e.emit instanceof Function&&e.emit(t,i)},n.prototype.trigger=n.prototype.emit,e.exports=n}),define("famous/inputs/Accumulator",["require","exports","module","../core/EventHandler","../transitions/Transitionable"],function(t,i,e){function n(t,i){void 0===i&&(i="update"),this._state=t&&t.get&&t.set?t:new r(t||0),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.on(i,s.bind(this))}function s(t){var i=t.delta,e=this.get();if(i.constructor===e.constructor){var n=i instanceof Array?[e[0]+i[0],e[1]+i[1]]:e+i;this.set(n)}}var o=t("../core/EventHandler"),r=t("../transitions/Transitionable");n.prototype.get=function(){return this._state.get()},n.prototype.set=function(t){this._state.set(t)},e.exports=n}),define("famous/inputs/DesktopEmulationMode",["require","exports","module"],function(){function t(t){window.addEventListener(t,function(t){return t.stopPropagation(),!1},!0)}var i="ontouchstart"in window;i&&(t("mousedown"),t("mousemove"),t("mouseup"),t("mouseleave"))}),define("famous/inputs/FastClick",["require","exports","module"],function(){!function(){if(window.CustomEvent){var t=300,i=500,e={},n={},s=Date.now;window.addEventListener("touchstart",function(t){for(var i=s(),n=0;n<t.changedTouches.length;n++){var o=t.changedTouches[n];e[o.identifier]=i}}),window.addEventListener("touchmove",function(t){for(var i=0;i<t.changedTouches.length;i++){var n=t.changedTouches[i];delete e[n.identifier]}}),window.addEventListener("touchend",function(i){for(var o=s(),r=0;r<i.changedTouches.length;r++){var a=i.changedTouches[r],h=e[a.identifier];if(h&&t>o-h){var c=new window.CustomEvent("click",{bubbles:!0,detail:a});n[o]=i,i.target.dispatchEvent(c)}delete e[a.identifier]}}),window.addEventListener("click",function(t){var e=s();for(var o in n){var r=n[o];i>e-o?t instanceof window.MouseEvent&&t.target===r.target&&t.stopPropagation():delete n[o]}},!0)}}()}),define("famous/inputs/GenericSync",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t,i){this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._syncs={},t&&this.addSync(t),i&&this.setOptions(i)}function s(t,i){r[t]&&(this._syncs[t]=new r[t](i),this.pipeSync(t))}var o=t("../core/EventHandler");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DIRECTION_Z=2;var r={};n.register=function(t){for(var i in t){if(r[i]){if(r[i]===t[i])return;throw Error("this key is registered to a different sync class")}r[i]=t[i]}},n.prototype.setOptions=function(t){for(var i in this._syncs)this._syncs[i].setOptions(t)},n.prototype.pipeSync=function(t){var i=this._syncs[t];this._eventInput.pipe(i),i.pipe(this._eventOutput)},n.prototype.unpipeSync=function(t){var i=this._syncs[t];this._eventInput.unpipe(i),i.unpipe(this._eventOutput)},n.prototype.addSync=function(t){if(t instanceof Array)for(var i=0;i<t.length;i++)s.call(this,t[i]);else if(t instanceof Object)for(var e in t)s.call(this,e,t[e])},e.exports=n}),define("famous/inputs/MouseSync",["require","exports","module","../core/EventHandler","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._eventInput=new h,this._eventOutput=new h,h.setInputHandler(this,this._eventInput),h.setOutputHandler(this,this._eventOutput),this._eventInput.on("mousedown",s.bind(this)),this._eventInput.on("mousemove",o.bind(this)),this._eventInput.on("mouseup",r.bind(this)),this.options.propogate?this._eventInput.on("mouseleave",a.bind(this)):this._eventInput.on("mouseleave",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:0,clientY:0,offsetX:0,offsetY:0},this._positionHistory=[],this._position=null,this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._moved=!1,this._documentActive=!1}function s(t){var i,e;this.options.preventDefault&&t.preventDefault();var n=t.clientX,s=t.clientY;this._prevCoord=[n,s],this._prevTime=Date.now(),this._down=!0,this._move=!1,void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var o=this._payload;o.delta=i,o.position=this._position,o.velocity=e,o.clientX=n,o.clientY=s,o.offsetX=t.offsetX,o.offsetY=t.offsetY,this._positionHistory.push({position:o.position.slice?o.position.slice(0):o.position,time:this._prevTime}),this._eventOutput.emit("start",o),this._documentActive=!1}function o(t){if(this._prevCoord){var i=this._prevCoord,e=(this._prevTime,t.clientX),s=t.clientY,o=Date.now(),r=e-i[0],a=s-i[1];this.options.rails&&(Math.abs(r)>Math.abs(a)?a=0:r=0);var h,c,u=Math.max(o-this._positionHistory[0].time,p),l=this.options.scale;this.options.direction===n.DIRECTION_X?(c=l*r,this._position+=c,h=l*(this._position-this._positionHistory[0].position)/u):this.options.direction===n.DIRECTION_Y?(c=l*a,this._position+=c,h=l*(this._position-this._positionHistory[0].position)/u):(c=[l*r,l*a],h=[l*(this._position[0]-this._positionHistory[0].position[0])/u,l*(this._position[1]-this._positionHistory[0].position[1])/u],this._position[0]+=c[0],this._position[1]+=c[1]);var f=this._payload;f.delta=c,f.position=this._position,f.velocity=h,f.clientX=e,f.clientY=s,f.offsetX=t.offsetX,f.offsetY=t.offsetY,this._positionHistory.length===this.options.velocitySampleLength&&this._positionHistory.shift(),this._positionHistory.push({position:f.position.slice?f.position.slice(0):f.position,time:o}),this._eventOutput.emit("update",f),this._prevCoord=[e,s],this._prevTime=o,this._move=!0}}function r(){this._down&&(this._eventOutput.emit("end",this._payload),this._prevCoord=void 0,this._prevTime=void 0,this._down=!1,this._move=!1,this._positionHistory=[])}function a(t){if(this._down&&this._move&&!this._documentActive){var i=o.bind(this),e=function(t){r.call(this,t),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",e)}.bind(this,t);document.addEventListener("mousemove",i),document.addEventListener("mouseup",e),this._documentActive=!0}}var h=t("../core/EventHandler"),c=t("../core/OptionsManager");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,scale:1,propogate:!0,velocitySampleLength:10,preventDefault:!0},n.DIRECTION_X=0,n.DIRECTION_Y=1;var p=8;n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.exports=n}),define("famous/inputs/TwoFingerSync",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(){this._eventInput=new s,this._eventOutput=new s,s.setInputHandler(this,this._eventInput),s.setOutputHandler(this,this._eventOutput),this.touchAEnabled=!1,this.touchAId=0,this.posA=null,this.timestampA=0,this.touchBEnabled=!1,this.touchBId=0,this.posB=null,this.timestampB=0,this._eventInput.on("touchstart",this.handleStart.bind(this)),this._eventInput.on("touchmove",this.handleMove.bind(this)),this._eventInput.on("touchend",this.handleEnd.bind(this)),this._eventInput.on("touchcancel",this.handleEnd.bind(this))}var s=t("../core/EventHandler");n.calculateAngle=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.atan2(n,e)},n.calculateDistance=function(t,i){var e=i[0]-t[0],n=i[1]-t[1];return Math.sqrt(e*e+n*n)},n.calculateCenter=function(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]};var o=Date.now;n.prototype.handleStart=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];this.touchAEnabled?this.touchBEnabled||(this.touchBId=e.identifier,this.touchBEnabled=!0,this.posB=[e.pageX,e.pageY],this.timestampB=o(),this._startUpdate(t)):(this.touchAId=e.identifier,this.touchAEnabled=!0,this.posA=[e.pageX,e.pageY],this.timestampA=o())}},n.prototype.handleMove=function(t){if(this.touchAEnabled&&this.touchBEnabled){for(var i,e=this.timestampA,n=this.timestampB,s=0;s<t.changedTouches.length;s++){var r=t.changedTouches[s];r.identifier===this.touchAId?(this.posA=[r.pageX,r.pageY],this.timestampA=o(),i=this.timestampA-e):r.identifier===this.touchBId&&(this.posB=[r.pageX,r.pageY],this.timestampB=o(),i=this.timestampB-n)}i&&this._moveUpdate(i)}},n.prototype.handleEnd=function(t){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i];(e.identifier===this.touchAId||e.identifier===this.touchBId)&&(this.touchAEnabled&&this.touchBEnabled&&this._eventOutput.emit("end",{touches:[this.touchAId,this.touchBId],angle:this._angle}),this.touchAEnabled=!1,this.touchAId=0,this.touchBEnabled=!1,this.touchBId=0)}},e.exports=n}),define("famous/inputs/PinchSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,i,e){function n(t){s.call(this),this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._displacement=0,this._previousDistance=0}var s=t("./TwoFingerSync"),o=t("../core/OptionsManager");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={scale:1},n.prototype._startUpdate=function(t){this._previousDistance=s.calculateDistance(this.posA,this.posB),this._displacement=0,this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._dist,center:s.calculateCenter(this.posA,this.posB)})},n.prototype._moveUpdate=function(t){var i=s.calculateDistance(this.posA,this.posB),e=s.calculateCenter(this.posA,this.posB),n=this.options.scale,o=n*(i-this._previousDistance),r=o/t;this._previousDistance=i,this._displacement+=o,this._eventOutput.emit("update",{delta:o,velocity:r,distance:i,displacement:this._displacement,center:e,touches:[this.touchAId,this.touchBId]})},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.exports=n}),define("famous/inputs/RotateSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,i,e){function n(t){s.call(this),this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),this._angle=0,this._previousAngle=0
}var s=t("./TwoFingerSync"),o=t("../core/OptionsManager");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={scale:1},n.prototype._startUpdate=function(t){this._angle=0,this._previousAngle=s.calculateAngle(this.posA,this.posB);var i=s.calculateCenter(this.posA,this.posB);this._eventOutput.emit("start",{count:t.touches.length,angle:this._angle,center:i,touches:[this.touchAId,this.touchBId]})},n.prototype._moveUpdate=function(t){var i=this.options.scale,e=s.calculateAngle(this.posA,this.posB),n=s.calculateCenter(this.posA,this.posB),o=i*(e-this._previousAngle),r=o/t;this._angle+=o,this._eventOutput.emit("update",{delta:o,velocity:r,angle:this._angle,center:n,touches:[this.touchAId,this.touchBId]}),this._previousAngle=e},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.exports=n}),define("famous/inputs/ScaleSync",["require","exports","module","./TwoFingerSync","../core/OptionsManager"],function(t,i,e){function n(t){o.call(this),this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this._scaleFactor=1,this._startDist=0,this._eventInput.on("pipe",s.bind(this))}function s(){this.touchAId=void 0,this.touchBId=void 0}var o=t("./TwoFingerSync"),r=t("../core/OptionsManager");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={scale:1},n.prototype._startUpdate=function(t){this._scaleFactor=1,this._startDist=o.calculateDistance(this.posA,this.posB),this._eventOutput.emit("start",{count:t.touches.length,touches:[this.touchAId,this.touchBId],distance:this._startDist,center:o.calculateCenter(this.posA,this.posB)})},n.prototype._moveUpdate=function(t){var i=this.options.scale,e=o.calculateDistance(this.posA,this.posB),n=o.calculateCenter(this.posA,this.posB),s=(e-this._startDist)/this._startDist,r=Math.max(1+i*s,0),a=(r-this._scaleFactor)/t;this._eventOutput.emit("update",{delta:s,scale:r,velocity:a,distance:e,center:n,touches:[this.touchAId,this.touchBId]}),this._scaleFactor=r},n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.exports=n}),define("famous/inputs/ScrollSync",["require","exports","module","../core/EventHandler","../core/Engine","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._payload={delta:null,position:null,velocity:null,slip:!0},this._eventInput=new r,this._eventOutput=new r,r.setInputHandler(this,this._eventInput),r.setOutputHandler(this,this._eventOutput),this._position=void 0===this.options.direction?[0,0]:0,this._prevTime=void 0,this._prevVel=void 0,this._eventInput.on("mousewheel",o.bind(this)),this._eventInput.on("wheel",o.bind(this)),this._inProgress=!1,this._loopBound=!1}function s(){if(this._inProgress&&p()-this._prevTime>this.options.stallTime){this._inProgress=!1;var t=Math.abs(this._prevVel)>=this.options.minimumEndSpeed?this._prevVel:0,i=this._payload;i.position=this._position,i.velocity=t,i.slip=!0,this._eventOutput.emit("end",i)}}function o(t){this.options.preventDefault&&t.preventDefault(),this._inProgress||(this._inProgress=!0,this._position=void 0===this.options.direction?[0,0]:0,y=this._payload,y.slip=!0,y.position=this._position,y.clientX=t.clientX,y.clientY=t.clientY,y.offsetX=t.offsetX,y.offsetY=t.offsetY,this._eventOutput.emit("start",y),this._loopBound||(a.on("prerender",s.bind(this)),this._loopBound=!0));var i=p(),e=this._prevTime||i,o=void 0!==t.wheelDeltaX?t.wheelDeltaX:-t.deltaX,r=void 0!==t.wheelDeltaY?t.wheelDeltaY:-t.deltaY;1===t.deltaMode&&(o*=this.options.lineHeight,r*=this.options.lineHeight),this.options.rails&&(Math.abs(o)>Math.abs(r)?r=0:o=0);var h,u,l=Math.max(i-e,c),f=o/l,d=r/l,_=this.options.scale;this.options.direction===n.DIRECTION_X?(u=_*o,h=_*f,this._position+=u):this.options.direction===n.DIRECTION_Y?(u=_*r,h=_*d,this._position+=u):(u=[_*o,_*r],h=[_*f,_*d],this._position[0]+=u[0],this._position[1]+=u[1]);var y=this._payload;y.delta=u,y.velocity=h,y.position=this._position,y.slip=!0,this._eventOutput.emit("update",y),this._prevTime=i,this._prevVel=h}var r=t("../core/EventHandler"),a=t("../core/Engine"),h=t("../core/OptionsManager");n.DEFAULT_OPTIONS={direction:void 0,minimumEndSpeed:1/0,rails:!1,scale:1,stallTime:50,lineHeight:40,preventDefault:!0},n.DIRECTION_X=0,n.DIRECTION_Y=1;var c=8,p=Date.now;n.prototype.getOptions=function(){return this.options},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},e.exports=n}),define("famous/inputs/TouchTracker",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t,i,e){return{x:t.clientX,y:t.clientY,identifier:t.identifier,origin:i.origin,timestamp:p(),count:i.touches.length,history:e}}function s(t){if(!(t.touches.length>this.touchLimit)){this.isTouched=!0;for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=n(e,t,null);this.eventOutput.emit("trackstart",s),this.selective||this.touchHistory[e.identifier]||this.track(s)}}}function o(t){if(!(t.touches.length>this.touchLimit))for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var o=n(e,t,s);this.touchHistory[e.identifier].push(o),this.eventOutput.emit("trackmove",o)}}}function r(t){if(this.isTouched){for(var i=0;i<t.changedTouches.length;i++){var e=t.changedTouches[i],s=this.touchHistory[e.identifier];if(s){var o=n(e,t,s);this.eventOutput.emit("trackend",o),delete this.touchHistory[e.identifier]}}this.isTouched=!1}}function a(){for(var t in this.touchHistory){var i=this.touchHistory[t];this.eventOutput.emit("trackend",{touch:i[i.length-1].touch,timestamp:Date.now(),count:0,history:i}),delete this.touchHistory[t]}}function h(t){this.selective=t.selective,this.touchLimit=t.touchLimit||1,this.touchHistory={},this.eventInput=new c,this.eventOutput=new c,c.setInputHandler(this,this.eventInput),c.setOutputHandler(this,this.eventOutput),this.eventInput.on("touchstart",s.bind(this)),this.eventInput.on("touchmove",o.bind(this)),this.eventInput.on("touchend",r.bind(this)),this.eventInput.on("touchcancel",r.bind(this)),this.eventInput.on("unpipe",a.bind(this)),this.isTouched=!1}var c=t("../core/EventHandler"),p=Date.now;h.prototype.track=function(t){this.touchHistory[t.identifier]=[t]},e.exports=h}),define("famous/inputs/TouchSync",["require","exports","module","./TouchTracker","../core/EventHandler","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new c(this.options),t&&this.setOptions(t),this._eventOutput=new h,this._touchTracker=new a({touchLimit:this.options.touchLimit}),h.setOutputHandler(this,this._eventOutput),h.setInputHandler(this,this._touchTracker),this._touchTracker.on("trackstart",s.bind(this)),this._touchTracker.on("trackmove",o.bind(this)),this._touchTracker.on("trackend",r.bind(this)),this._payload={delta:null,position:null,velocity:null,clientX:void 0,clientY:void 0,count:0,touch:void 0},this._position=null}function s(t){var i,e;void 0!==this.options.direction?(this._position=0,i=0,e=0):(this._position=[0,0],i=[0,0],e=[0,0]);var n=this._payload;n.delta=e,n.position=this._position,n.velocity=i,n.clientX=t.x,n.clientY=t.y,n.count=t.count,n.touch=t.identifier,this._eventOutput.emit("start",n)}function o(t){var i=t.history,e=i[i.length-1],s=i[i.length-2],o=i[i.length-this.options.velocitySampleLength]?i[i.length-this.options.velocitySampleLength]:i[i.length-2],r=o.timestamp,a=e.timestamp,h=e.x-s.x,c=e.y-s.y,u=e.x-o.x,l=e.y-o.y;this.options.rails&&(Math.abs(h)>Math.abs(c)?c=0:h=0,Math.abs(u)>Math.abs(l)?l=0:u=0);var f,d,_=Math.max(a-r,p),y=u/_,g=l/_,v=this.options.scale;this.options.direction===n.DIRECTION_X?(d=v*h,f=v*y,this._position+=d):this.options.direction===n.DIRECTION_Y?(d=v*c,f=v*g,this._position+=d):(d=[v*h,v*c],f=[v*y,v*g],this._position[0]+=d[0],this._position[1]+=d[1]);var m=this._payload;m.delta=d,m.velocity=f,m.position=this._position,m.clientX=t.x,m.clientY=t.y,m.count=t.count,m.touch=t.identifier,this._eventOutput.emit("update",m)}function r(t){this._payload.count=t.count,this._eventOutput.emit("end",this._payload)}var a=t("./TouchTracker"),h=t("../core/EventHandler"),c=t("../core/OptionsManager");n.DEFAULT_OPTIONS={direction:void 0,rails:!1,touchLimit:1,velocitySampleLength:10,scale:1},n.DIRECTION_X=0,n.DIRECTION_Y=1;var p=8;n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.getOptions=function(){return this.options},e.exports=n}),define("famous/math/Vector",["require","exports","module"],function(t,i,e){function n(t,i,e){return 1===arguments.length&&void 0!==t?this.set(t):(this.x=t||0,this.y=i||0,this.z=e||0),this}function s(t,i,e){return this.x=t,this.y=i,this.z=e,this}function o(t){return s.call(this,t[0],t[1],t[2]||0)}function r(t){return s.call(this,t.x,t.y,t.z)}function a(t){return s.call(this,t,0,0)}var h=new n(0,0,0);n.prototype.add=function(t){return s.call(h,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return s.call(h,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.mult=function(t){return s.call(h,t*this.x,t*this.y,t*this.z)},n.prototype.div=function(t){return this.mult(1/t)},n.prototype.cross=function(t){var i=this.x,e=this.y,n=this.z,o=t.x,r=t.y,a=t.z;return s.call(h,n*r-e*a,i*a-n*o,e*o-i*r)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.rotateX=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,i,e*o-n*r,e*r+n*o)},n.prototype.rotateY=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,n*r+i*o,e,n*o-i*r)},n.prototype.rotateZ=function(t){var i=this.x,e=this.y,n=this.z,o=Math.cos(t),r=Math.sin(t);return s.call(h,i*o-e*r,i*r+e*o,n)},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.normalize=function(t){0===arguments.length&&(t=1);var i=this.norm();return i>1e-7?r.call(h,this.mult(t/i)):s.call(h,t,0,0)},n.prototype.clone=function(){return new n(this)},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.set=function(t){return t instanceof Array?o.call(this,t):"number"==typeof t?a.call(this,t):r.call(this,t)},n.prototype.setXYZ=function(){return s.apply(this,arguments)},n.prototype.set1D=function(t){return a.call(this,t)},n.prototype.put=function(t){this===h?r.call(t,h):r.call(t,this)},n.prototype.clear=function(){return s.call(this,0,0,0)},n.prototype.cap=function c(c){if(1/0===c)return r.call(h,this);var t=this.norm();return t>c?r.call(h,this.mult(c/t)):r.call(h,this)},n.prototype.project=function(t){return t.mult(this.dot(t))},n.prototype.reflectAcross=function(t){return t.normalize().put(t),r(h,this.sub(this.project(t).mult(2)))},n.prototype.get=function(){return[this.x,this.y,this.z]},n.prototype.get1D=function(){return this.x},e.exports=n}),define("famous/math/Matrix",["require","exports","module","./Vector"],function(t,i,e){function n(t){return this.values=t||[[1,0,0],[0,1,0],[0,0,1]],this}var s=t("./Vector"),o=new n,r=new s;n.prototype.get=function(){return this.values},n.prototype.set=function(t){this.values=t},n.prototype.vectorMultiply=function(t){var i=this.get(),e=t.x,n=t.y,s=t.z,o=i[0],a=i[1],h=i[2],c=o[0],p=o[1],u=o[2],l=a[0],f=a[1],d=a[2],_=h[0],y=h[1],g=h[2];return r.setXYZ(c*e+p*n+u*s,l*e+f*n+d*s,_*e+y*n+g*s)},n.prototype.multiply=function(t){for(var i=this.get(),e=[[]],n=0;3>n;n++){e[n]=[];for(var s=0;3>s;s++){for(var r=0,a=0;3>a;a++)r+=i[n][a]*t[a][s];e[n][s]=r}}return o.set(e)},n.prototype.transpose=function(){for(var t=[],i=this.get(),e=0;3>e;e++)for(var n=0;3>n;n++)t[e][n]=i[n][e];return o.set(t)},n.prototype.clone=function(){for(var t=this.get(),i=[],e=0;3>e;e++)i[e]=t[e].slice();return new n(i)},e.exports=n}),define("famous/math/Quaternion",["require","exports","module","./Matrix"],function(t,i,e){function n(t,i,e,n){return 1===arguments.length?this.set(t):(this.w=void 0!==t?t:1,this.x=void 0!==i?i:0,this.y=void 0!==e?e:0,this.z=void 0!==n?n:0),this}var s=t("./Matrix"),o=new n(1,0,0,0);n.prototype.add=function(t){return o.setWXYZ(this.w+t.w,this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.sub=function(t){return o.setWXYZ(this.w-t.w,this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scalarDivide=function(t){return this.scalarMultiply(1/t)},n.prototype.scalarMultiply=function(t){return o.setWXYZ(this.w*t,this.x*t,this.y*t,this.z*t)},n.prototype.multiply=function(t){var i=this.x,e=this.y,n=this.z,s=this.w,r=t.x,a=t.y,h=t.z,c=t.w||0;return o.setWXYZ(s*c-i*r-e*a-n*h,i*c+r*s+a*n-e*h,e*c+a*s+i*h-r*n,n*c+h*s+r*e-i*a)};var r=new n(1,0,0,0);n.prototype.rotateVector=function(t){return r.set(this.conj()),o.set(this.multiply(t).multiply(r))},n.prototype.inverse=function(){return o.set(this.conj().scalarDivide(this.normSquared()))},n.prototype.negate=function(){return this.scalarMultiply(-1)},n.prototype.conj=function(){return o.setWXYZ(this.w,-this.x,-this.y,-this.z)},n.prototype.normalize=function(t){return t=void 0===t?1:t,this.scalarDivide(t*this.norm())},n.prototype.makeFromAngleAndAxis=function(t,i){var e=i.normalize(),n=.5*t,s=-Math.sin(n);return this.x=s*e.x,this.y=s*e.y,this.z=s*e.z,this.w=Math.cos(n),this},n.prototype.setWXYZ=function(t,i,e,n){return o.clear(),this.w=t,this.x=i,this.y=e,this.z=n,this},n.prototype.set=function(t){return t instanceof Array?(this.w=0,this.x=t[0],this.y=t[1],this.z=t[2]):(this.w=t.w,this.x=t.x,this.y=t.y,this.z=t.z),this!==o&&o.clear(),this},n.prototype.put=function(t){t.set(o)},n.prototype.clone=function(){return new n(this)},n.prototype.clear=function(){return this.w=1,this.x=0,this.y=0,this.z=0,this},n.prototype.isEqual=function(t){return t.w===this.w&&t.x===this.x&&t.y===this.y&&t.z===this.z},n.prototype.dot=function(t){return this.w*t.w+this.x*t.x+this.y*t.y+this.z*t.z},n.prototype.normSquared=function(){return this.dot(this)},n.prototype.norm=function(){return Math.sqrt(this.normSquared())},n.prototype.isZero=function(){return!(this.x||this.y||this.z)},n.prototype.getTransform=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,s=t.w;return[1-2*e*e-2*n*n,2*i*e-2*n*s,2*i*n+2*e*s,0,2*i*e+2*n*s,1-2*i*i-2*n*n,2*e*n-2*i*s,0,2*i*n-2*e*s,2*e*n+2*i*s,1-2*i*i-2*e*e,0,0,0,0,1]};var a=new s;n.prototype.getMatrix=function(){var t=this.normalize(1),i=t.x,e=t.y,n=t.z,s=t.w;return a.set([[1-2*e*e-2*n*n,2*i*e+2*n*s,2*i*n-2*e*s],[2*i*e-2*n*s,1-2*i*i-2*n*n,2*e*n+2*i*s],[2*i*n+2*e*s,2*e*n-2*i*s,1-2*i*i-2*e*e]])};var h=1e-5;n.prototype.slerp=function(t,i){var e,n,s,r,a;return n=this.dot(t),1-n>h?(e=Math.acos(n),s=Math.sin(e),r=Math.sin((1-i)*e)/s,a=Math.sin(i*e)/s):(r=1-i,a=i),o.set(this.scalarMultiply(r/a).add(t).multiply(a))},e.exports=n}),define("famous/math/Random",["require","exports","module"],function(t,i,e){function n(t,i){return t+o()*(i-t)}function s(t,i){return t+o()*(i-t+1)>>0}var o=Math.random,r={};r.integer=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var n=[],o=0;e>o;o++)n.push(s(t,i));return n}return s(t,i)},r.range=function(t,i,e){if(t=void 0!==t?t:0,i=void 0!==i?i:1,void 0!==e){for(var s=[],o=0;e>o;o++)s.push(n(t,i));return s}return n(t,i)},r.sign=function(t){return t=void 0!==t?t:.5,o()<t?1:-1},r.bool=function(t){return t=void 0!==t?t:.5,o()<t},e.exports=r}),define("famous/math/Utilities",["require","exports","module"],function(t,i,e){var n={};n.clamp=function(t,i){return Math.max(Math.min(t,i[1]),i[0])},n.length=function(t){for(var i=0,e=0;e<t.length;e++)i+=t[e]*t[e];return Math.sqrt(i)},e.exports=n}),define("famous/modifiers/Draggable",["require","exports","module","../core/Transform","../transitions/Transitionable","../core/EventHandler","../math/Utilities","../inputs/GenericSync","../inputs/MouseSync","../inputs/TouchSync"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._positionState=new p([0,0]),this._differential=[0,0],this._active=!0,this.sync=new f(["mouse","touch"],{scale:this.options.scale}),this.eventOutput=new u,u.setInputHandler(this,this.sync),u.setOutputHandler(this,this.eventOutput),h.call(this)}function s(t){var i=this.options,e=i.projection,n=i.snapX,s=i.snapY,o=e&y.x?t[0]:0,r=e&y.y?t[1]:0;return n>0&&(o-=o%n),s>0&&(r-=r%s),[o,r]}function o(){this._active&&(this._positionState.isActive()&&this._positionState.halt(),this.eventOutput.emit("start",{position:this.getPosition()}))}function r(t){if(this._active){var i=this.options;this._differential=t.position;var e=s.call(this,this._differential);this._differential[0]-=e[0],this._differential[1]-=e[1];var n=this.getPosition();if(n[0]+=e[0],n[1]+=e[1],i.xRange){var o=[i.xRange[0]+.5*i.snapX,i.xRange[1]-.5*i.snapX];n[0]=g(n[0],o)}if(i.yRange){var r=[i.yRange[0]+.5*i.snapY,i.yRange[1]-.5*i.snapY];n[1]=g(n[1],r)}this.eventOutput.emit("update",{position:n})}}function a(){this._active&&this.eventOutput.emit("end",{position:this.getPosition()})}function h(){this.sync.on("start",o.bind(this)),this.sync.on("update",r.bind(this)),this.sync.on("end",a.bind(this))}var c=t("../core/Transform"),p=t("../transitions/Transitionable"),u=t("../core/EventHandler"),l=t("../math/Utilities"),f=t("../inputs/GenericSync"),d=t("../inputs/MouseSync"),_=t("../inputs/TouchSync");f.register({mouse:d,touch:_});var y={x:1,y:2};n.DIRECTION_X=y.x,n.DIRECTION_Y=y.y;var g=l.clamp;n.DEFAULT_OPTIONS={projection:y.x|y.y,scale:1,xRange:null,yRange:null,snapX:0,snapY:0,transition:{duration:0}},n.prototype.setOptions=function(t){var i=this.options;if(void 0!==t.projection){var e=t.projection;this.options.projection=0,["x","y"].forEach(function(t){-1!==e.indexOf(t)&&(i.projection|=y[t])})}void 0!==t.scale&&(i.scale=t.scale,this.sync.setOptions({scale:t.scale})),void 0!==t.xRange&&(i.xRange=t.xRange),void 0!==t.yRange&&(i.yRange=t.yRange),void 0!==t.snapX&&(i.snapX=t.snapX),void 0!==t.snapY&&(i.snapY=t.snapY)},n.prototype.getPosition=function(){return this._positionState.get()},n.prototype.setRelativePosition=function(t,i,e){var n=this.getPosition(),s=[n[0]+t[0],n[1]+t[1]];this.setPosition(s,i,e)},n.prototype.setPosition=function(t,i,e){this._positionState.isActive()&&this._positionState.halt(),this._positionState.set(t,i,e)},n.prototype.activate=function(){this._active=!0},n.prototype.deactivate=function(){this._active=!1},n.prototype.toggle=function(){this._active=!this._active},n.prototype.modify=function(t){var i=this.getPosition();return{transform:c.translate(i[0],i[1]),target:t}},e.exports=n}),define("famous/modifiers/Fader",["require","exports","module","../transitions/Transitionable","../core/OptionsManager"],function(t,i,e){function n(t,i){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new o(this.options),t&&this.setOptions(t),i||(i=0),this.transitionHelper=new s(i)}var s=t("../transitions/Transitionable"),o=t("../core/OptionsManager");n.DEFAULT_OPTIONS={cull:!1,transition:!0,pulseInTransition:!0,pulseOutTransition:!0},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.show=function(t,i){t=t||this.options.transition,this.set(1,t,i)},n.prototype.hide=function(t,i){t=t||this.options.transition,this.set(0,t,i)},n.prototype.set=function(t,i,e){this.halt(),this.transitionHelper.set(t,i,e)},n.prototype.halt=function(){this.transitionHelper.halt()},n.prototype.isVisible=function(){return this.transitionHelper.get()>0},n.prototype.modify=function(t){var i=this.transitionHelper.get();return this.options.cull&&!i?void 0:{opacity:i,target:t}},e.exports=n}),define("famous/modifiers/ModifierChain",["require","exports","module"],function(t,i,e){function n(){this._chain=[],arguments.length&&this.addModifier.apply(this,arguments)}n.prototype.addModifier=function(){Array.prototype.push.apply(this._chain,arguments)},n.prototype.removeModifier=function(t){var i=this._chain.indexOf(t);0>i||this._chain.splice(i,1)},n.prototype.modify=function(t){for(var i=this._chain,e=t,n=0;n<i.length;n++)e=i[n].modify(e);return e},e.exports=n}),define("famous/modifiers/StateModifier",["require","exports","module","../core/Modifier","../core/Transform","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,i,e){function n(t){this._transformState=new a(o.identity),this._opacityState=new r(1),this._originState=new r([0,0]),this._alignState=new r([0,0]),this._sizeState=new r([0,0]),this._proportionsState=new r([0,0]),this._modifier=new s({transform:this._transformState,opacity:this._opacityState,origin:null,align:null,size:null,proportions:null}),this._hasOrigin=!1,this._hasAlign=!1,this._hasSize=!1,this._hasProportions=!1,t&&(t.transform&&this.setTransform(t.transform),void 0!==t.opacity&&this.setOpacity(t.opacity),t.origin&&this.setOrigin(t.origin),t.align&&this.setAlign(t.align),t.size&&this.setSize(t.size),t.proportions&&this.setProportions(t.proportions))}var s=t("../core/Modifier"),o=t("../core/Transform"),r=t("../transitions/Transitionable"),a=t("../transitions/TransitionableTransform");n.prototype.setTransform=function(t,i,e){return this._transformState.set(t,i,e),this},n.prototype.setOpacity=function(t,i,e){return this._opacityState.set(t,i,e),this},n.prototype.setOrigin=function(t,i,e){return null===t?(this._hasOrigin&&(this._modifier.originFrom(null),this._hasOrigin=!1),this):(this._hasOrigin||(this._hasOrigin=!0,this._modifier.originFrom(this._originState)),this._originState.set(t,i,e),this)},n.prototype.setAlign=function(t,i,e){return null===t?(this._hasAlign&&(this._modifier.alignFrom(null),this._hasAlign=!1),this):(this._hasAlign||(this._hasAlign=!0,this._modifier.alignFrom(this._alignState)),this._alignState.set(t,i,e),this)},n.prototype.setSize=function(t,i,e){return null===t?(this._hasSize&&(this._modifier.sizeFrom(null),this._hasSize=!1),this):(this._hasSize||(this._hasSize=!0,this._modifier.sizeFrom(this._sizeState)),this._sizeState.set(t,i,e),this)},n.prototype.setProportions=function(t,i,e){return null===t?(this._hasProportions&&(this._modifier.proportionsFrom(null),this._hasProportions=!1),this):(this._hasProportions||(this._hasProportions=!0,this._modifier.proportionsFrom(this._proportionsState)),this._proportionsState.set(t,i,e),this)},n.prototype.halt=function(){this._transformState.halt(),this._opacityState.halt(),this._originState.halt(),this._alignState.halt(),this._sizeState.halt(),this._proportionsState.halt()},n.prototype.getTransform=function(){return this._transformState.get()},n.prototype.getFinalTransform=function(){return this._transformState.getFinal()},n.prototype.getOpacity=function(){return this._opacityState.get()},n.prototype.getOrigin=function(){return this._hasOrigin?this._originState.get():null},n.prototype.getAlign=function(){return this._hasAlign?this._alignState.get():null},n.prototype.getSize=function(){return this._hasSize?this._sizeState.get():null},n.prototype.getProportions=function(){return this._hasProportions?this._proportionsState.get():null},n.prototype.modify=function(t){return this._modifier.modify(t)},e.exports=n}),define("famous/physics/PhysicsEngine",["require","exports","module","../core/EventHandler"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this._particles=[],this._bodies=[],this._agentData={},this._forces=[],this._constraints=[],this._buffer=0,this._prevTime=T(),this._isSleeping=!1,this._eventHandler=null,this._currAgentId=0,this._hasBodies=!1,this._eventHandler=null}function s(t){return t.applyForce?this._forces:t.applyConstraint?this._constraints:void 0}function o(t,i,e){return void 0===i&&(i=this.getParticlesAndBodies()),i instanceof Array||(i=[i]),t.on("change",this.wake.bind(this)),this._agentData[this._currAgentId]={agent:t,id:this._currAgentId,targets:i,source:e},s.call(this,t).push(this._currAgentId),this._currAgentId++}function r(t){return this._agentData[t]}function a(t){var i=r.call(this,this._forces[t]);i.agent.applyForce(i.targets,i.source)}function h(){for(var t=this._forces.length-1;t>-1;t--)a.call(this,t)}function c(t,i){var e=this._agentData[this._constraints[t]];return e.agent.applyConstraint(e.targets,e.source,i)}function p(t){for(var i=0;i<this.options.constraintSteps;){for(var e=this._constraints.length-1;e>-1;e--)c.call(this,e,t);i++}}function u(t,i){t.integrateVelocity(i),this.options.velocityCap&&t.velocity.cap(this.options.velocityCap).put(t.velocity)}function l(t,i){t.integrateAngularMomentum(i),t.updateAngularVelocity(),this.options.angularVelocityCap&&t.angularVelocity.cap(this.options.angularVelocityCap).put(t.angularVelocity)}function f(t,i){t.integrateOrientation(i)}function d(t,i){t.integratePosition(i),t.emit(w.update,t)}function _(t){h.call(this,t),this.forEach(u,t),this.forEachBody(l,t),p.call(this,t),this.forEachBody(f,t),this.forEach(d,t)}function y(){var t=0,i=0;return this.forEach(function(e){i=e.getEnergy(),t+=i}),t}function g(){var t=0;for(var i in this._agentData)t+=this.getAgentEnergy(i);return t}var v=t("../core/EventHandler"),m=17,O=1e3/120,S=17,T=Date.now,w={start:"start",update:"update",end:"end"};n.DEFAULT_OPTIONS={constraintSteps:1,sleepTolerance:1e-7,velocityCap:void 0,angularVelocityCap:void 0},n.prototype.setOptions=function(t){for(var i in t)this.options[i]&&(this.options[i]=t[i])},n.prototype.addBody=function(t){return t._engine=this,t.isBody?(this._bodies.push(t),this._hasBodies=!0):this._particles.push(t),t.on("start",this.wake.bind(this)),t},n.prototype.removeBody=function(t){var i=t.isBody?this._bodies:this._particles,e=i.indexOf(t);if(e>-1){for(var n in this._agentData)this.detachFrom(n.id,t);i.splice(e,1)}0===this.getBodies().length&&(this._hasBodies=!1)},n.prototype.attach=function(t,i,e){if(this.wake(),t instanceof Array){for(var n=[],s=0;s<t.length;s++)n[s]=o.call(this,t[s],i,e);return n}return o.call(this,t,i,e)},n.prototype.attachTo=function(t,i){r.call(this,t).targets.push(i)},n.prototype.detach=function(t){var i=this.getAgent(t),e=s.call(this,i),n=e.indexOf(t);e.splice(n,1),delete this._agentData[t]},n.prototype.detachFrom=function(t,i){var e=r.call(this,t);if(e.source===i)this.detach(t);else{var n=e.targets,s=n.indexOf(i);s>-1&&n.splice(s,1)}},n.prototype.detachAll=function(){this._agentData={},this._forces=[],this._constraints=[],this._currAgentId=0},n.prototype.getAgent=function(t){return r.call(this,t).agent},n.prototype.getParticles=function(){return this._particles},n.prototype.getBodies=function(){return this._bodies},n.prototype.getParticlesAndBodies=function(){return this.getParticles().concat(this.getBodies())},n.prototype.forEachParticle=function(t,i){for(var e=this.getParticles(),n=0,s=e.length;s>n;n++)t.call(this,e[n],i)},n.prototype.forEachBody=function(t,i){if(this._hasBodies)for(var e=this.getBodies(),n=0,s=e.length;s>n;n++)t.call(this,e[n],i)},n.prototype.forEach=function(t,i){this.forEachParticle(t,i),this.forEachBody(t,i)},n.prototype.getAgentEnergy=function(t){var i=r.call(this,t);return i.agent.getEnergy(i.targets,i.source)},n.prototype.getEnergy=function(){return y.call(this)+g.call(this)},n.prototype.step=function(){if(!this.isSleeping()){var t=T(),i=t-this._prevTime;this._prevTime=t,O>i||(i>S&&(i=S),_.call(this,m),this.emit(w.update,this),this.getEnergy()<this.options.sleepTolerance&&this.sleep())}},n.prototype.isSleeping=function(){return this._isSleeping},n.prototype.isActive=function(){return!this._isSleeping},n.prototype.sleep=function(){this._isSleeping||(this.forEach(function(t){t.sleep()}),this.emit(w.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this._prevTime=T(),this.emit(w.start,this),this._isSleeping=!1)},n.prototype.emit=function(t,i){null!==this._eventHandler&&this._eventHandler.emit(t,i)},n.prototype.on=function(t,i){null===this._eventHandler&&(this._eventHandler=new v),this._eventHandler.on(t,i)},e.exports=n}),define("famous/physics/integrators/SymplecticEuler",["require","exports","module"],function(t,i,e){var n={};n.integrateVelocity=function(t,i){var e=t.velocity,n=t.inverseMass,s=t.force;s.isZero()||(e.add(s.mult(i*n)).put(e),s.clear())},n.integratePosition=function(t,i){var e=t.position,n=t.velocity;e.add(n.mult(i)).put(e)},n.integrateAngularMomentum=function(t,i){var e=t.angularMomentum,n=t.torque;n.isZero()||(e.add(n.mult(i)).put(e),n.clear())},n.integrateOrientation=function(t,i){var e=t.orientation,n=t.angularVelocity;n.isZero()||e.add(e.multiply(n).scalarMultiply(.5*i)).put(e)},e.exports=n}),define("famous/physics/bodies/Particle",["require","exports","module","../../math/Vector","../../core/Transform","../../core/EventHandler","../integrators/SymplecticEuler"],function(t,i,e){function n(t){t=t||{};var i=n.DEFAULT_OPTIONS;this.position=new o,this.velocity=new o,this.force=new o,this._engine=null,this._isSleeping=!0,this._eventOutput=null,this.mass=void 0!==t.mass?t.mass:i.mass,this.inverseMass=1/this.mass,this.setPosition(t.position||i.position),this.setVelocity(t.velocity||i.velocity),this.force.set(t.force||[0,0,0]),this.transform=r.identity.slice(),this._spec={size:[!0,!0],target:{transform:this.transform,origin:[.5,.5],target:null}}}function s(){this._eventOutput=new a,this._eventOutput.bindThis(this),a.setOutputHandler(this,this._eventOutput)}var o=t("../../math/Vector"),r=t("../../core/Transform"),a=t("../../core/EventHandler"),h=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS={position:[0,0,0],velocity:[0,0,0],mass:1};var c={start:"start",update:"update",end:"end"},p=Date.now;n.prototype.isBody=!1,n.prototype.isActive=function(){return!this._isSleeping},n.prototype.sleep=function(){this._isSleeping||(this.emit(c.end,this),this._isSleeping=!0)},n.prototype.wake=function(){this._isSleeping&&(this.emit(c.start,this),this._isSleeping=!1,this._prevTime=p(),this._engine&&this._engine.wake())},n.prototype.setPosition=function(t){this.position.set(t)},n.prototype.setPosition1D=function(t){this.position.x=t},n.prototype.getPosition=function(){return this._engine.step(),this.position.get()},n.prototype.getPosition1D=function(){return this._engine.step(),this.position.x},n.prototype.setVelocity=function(t){this.velocity.set(t),(0!==t[0]||0!==t[1]||0!==t[2])&&this.wake()},n.prototype.setVelocity1D=function(t){this.velocity.x=t,0!==t&&this.wake()},n.prototype.getVelocity=function(){return this.velocity.get()},n.prototype.setForce=function(t){this.force.set(t),this.wake()},n.prototype.getVelocity1D=function(){return this.velocity.x},n.prototype.setMass=function(t){this.mass=t,this.inverseMass=1/t},n.prototype.getMass=function(){return this.mass},n.prototype.reset=function(t,i){this.setPosition(t||[0,0,0]),this.setVelocity(i||[0,0,0])},n.prototype.applyForce=function(t){t.isZero()||(this.force.add(t).put(this.force),this.wake())},n.prototype.applyImpulse=function(t){if(!t.isZero()){var i=this.velocity;i.add(t.mult(this.inverseMass)).put(i)}},n.prototype.integrateVelocity=function(t){h.integrateVelocity(this,t)},n.prototype.integratePosition=function(t){h.integratePosition(this,t)},n.prototype._integrate=function(t){this.integrateVelocity(t),this.integratePosition(t)},n.prototype.getEnergy=function(){return.5*this.mass*this.velocity.normSquared()},n.prototype.getTransform=function(){this._engine.step();var t=this.position,i=this.transform;return i[12]=t.x,i[13]=t.y,i[14]=t.z,i},n.prototype.modify=function(t){var i=this._spec.target;return i.transform=this.getTransform(),i.target=t,this._spec},n.prototype.emit=function(t,i){this._eventOutput&&this._eventOutput.emit(t,i)},n.prototype.on=function(){return s.call(this),this.on.apply(this,arguments)},n.prototype.removeListener=function(){return s.call(this),this.removeListener.apply(this,arguments)},n.prototype.pipe=function(){return s.call(this),this.pipe.apply(this,arguments)},n.prototype.unpipe=function(){return s.call(this),this.unpipe.apply(this,arguments)
},e.exports=n}),define("famous/physics/bodies/Body",["require","exports","module","./Particle","../../core/Transform","../../math/Vector","../../math/Quaternion","../../math/Matrix","../integrators/SymplecticEuler"],function(t,i,e){function n(t){s.call(this,t),t=t||{},this.orientation=new a,this.angularVelocity=new r,this.angularMomentum=new r,this.torque=new r,t.orientation&&this.orientation.set(t.orientation),t.angularVelocity&&this.angularVelocity.set(t.angularVelocity),t.angularMomentum&&this.angularMomentum.set(t.angularMomentum),t.torque&&this.torque.set(t.torque),this.angularVelocity.w=0,this.setMomentsOfInertia(),this.pWorld=new r}var s=t("./Particle"),o=t("../../core/Transform"),r=t("../../math/Vector"),a=t("../../math/Quaternion"),h=t("../../math/Matrix"),c=t("../integrators/SymplecticEuler");n.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,n.DEFAULT_OPTIONS.orientation=[0,0,0,1],n.DEFAULT_OPTIONS.angularVelocity=[0,0,0],n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.isBody=!0,n.prototype.setMass=function(){s.prototype.setMass.apply(this,arguments),this.setMomentsOfInertia()},n.prototype.setMomentsOfInertia=function(){this.inertia=new h,this.inverseInertia=new h},n.prototype.updateAngularVelocity=function(){this.angularVelocity.set(this.inverseInertia.vectorMultiply(this.angularMomentum))},n.prototype.toWorldCoordinates=function(t){return this.pWorld.set(this.orientation.rotateVector(t))},n.prototype.getEnergy=function(){return s.prototype.getEnergy.call(this)+.5*this.inertia.vectorMultiply(this.angularVelocity).dot(this.angularVelocity)},n.prototype.reset=function(t,i,e,n){s.prototype.reset.call(this,t,i),this.angularVelocity.clear(),this.setOrientation(e||[1,0,0,0]),this.setAngularMomentum(n||[0,0,0])},n.prototype.setOrientation=function(t){this.orientation.set(t)},n.prototype.setAngularVelocity=function(t){this.wake(),this.angularVelocity.set(t)},n.prototype.setAngularMomentum=function(t){this.wake(),this.angularMomentum.set(t)},n.prototype.applyForce=function(t,i){s.prototype.applyForce.call(this,t),void 0!==i&&this.applyTorque(i.cross(t))},n.prototype.applyTorque=function(t){this.wake(),this.torque.set(this.torque.add(t))},n.prototype.getTransform=function(){return o.thenMove(this.orientation.getTransform(),o.getTranslate(s.prototype.getTransform.call(this)))},n.prototype._integrate=function(t){s.prototype._integrate.call(this,t),this.integrateAngularMomentum(t),this.updateAngularVelocity(t),this.integrateOrientation(t)},n.prototype.integrateAngularMomentum=function(t){c.integrateAngularMomentum(this,t)},n.prototype.integrateOrientation=function(t){c.integrateOrientation(this,t)},e.exports=n}),define("famous/physics/bodies/Circle",["require","exports","module","./Body","../../math/Matrix"],function(t,i,e){function n(t){t=t||{},this.setRadius(t.radius||0),s.call(this,t)}var s=t("./Body"),o=t("../../math/Matrix");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setRadius=function(t){this.radius=t,this.size=[2*this.radius,2*this.radius],this.setMomentsOfInertia()},n.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.radius;this.inertia=new o([[.25*t*i*i,0,0],[0,.25*t*i*i,0],[0,0,.5*t*i*i]]),this.inverseInertia=new o([[4/(t*i*i),0,0],[0,4/(t*i*i),0],[0,0,2/(t*i*i)]])},e.exports=n}),define("famous/physics/bodies/Rectangle",["require","exports","module","./Body","../../math/Matrix"],function(t,i,e){function n(t){t=t||{},this.size=t.size||[0,0],s.call(this,t)}var s=t("./Body"),o=t("../../math/Matrix");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setSize=function(t){this.size=t,this.setMomentsOfInertia()},n.prototype.setMomentsOfInertia=function(){var t=this.mass,i=this.size[0],e=this.size[1];this.inertia=new o([[t*e*e/12,0,0],[0,t*i*i/12,0],[0,0,t*(i*i+e*e)/12]]),this.inverseInertia=new o([[12/(t*e*e),0,0],[0,12/(t*i*i),0],[0,0,12/(t*(i*i+e*e))]])},e.exports=n}),define("famous/physics/constraints/Constraint",["require","exports","module","../../core/EventHandler"],function(t,i,e){function n(){this.options=this.options||{},this._eventOutput=new s,s.setOutputHandler(this,this._eventOutput)}var s=t("../../core/EventHandler");n.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},n.prototype.applyConstraint=function(){},n.prototype.getEnergy=function(){return 0},e.exports=n}),define("famous/physics/constraints/Collision",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.normal=new o,this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o,s.call(this)}var s=t("./Constraint"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0},n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},n.prototype.applyConstraint=function(t,i,e){if(void 0!==i)for(var n=i.velocity,s=i.position,o=i.inverseMass,r=i.radius,a=this.options,h=a.drift,c=-a.slop,p=a.restitution,u=this.normal,l=this.pDiff,f=this.vDiff,d=this.impulse1,_=this.impulse2,y=0;y<t.length;y++){var g=t[y];if(g!==i){var v=g.velocity,m=g.position,O=g.inverseMass,S=g.radius;l.set(m.sub(s)),f.set(v.sub(n));var T=l.norm(),w=T-(r+S),b=1/(o+O),x=0;if(0>w){if(u.set(l.normalize()),this._eventOutput){var E={target:g,source:i,overlap:w,normal:u};this._eventOutput.emit("preCollision",E),this._eventOutput.emit("collision",E)}var I=c>=w?((1+p)*u.dot(f)+h/e*(w-c))/(x+e/b):(1+p)*u.dot(f)/(x+e/b);u.mult(e*I).put(d),d.mult(-1).put(_),i.applyImpulse(d),g.applyImpulse(_),this._eventOutput&&this._eventOutput.emit("postCollision",E)}}}},e.exports=n}),define("famous/physics/constraints/Curve",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,s.call(this)}var s=t("./Constraint"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n;var r=1e-7,a=Math.PI;n.DEFAULT_OPTIONS={equation:function(){return 0},plane:function(t,i,e){return e},period:0,dampingRatio:0},n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},n.prototype.applyConstraint=function(t,i,e){for(var n=this.options,s=this.impulse,o=this.J,h=n.equation,c=n.plane,p=n.dampingRatio,u=n.period,l=0;l<t.length;l++){var f,d,_=t[l],y=_.velocity,g=_.position,v=_.mass;if(0===u)f=0,d=1;else{var m=4*v*a*p/u,O=4*v*a*a/(u*u);f=1/(m+e*O),d=e*O/(m+e*O)}var S=g.x,T=g.y,w=g.z,b=h(S,T,w),x=(h(S+r,g,g)-b)/r,E=(h(S,T+r,g)-b)/r,I=(h(S,T,g+r)-b)/r,z=c(S,T,w),M=(c(S+r,T,w)-z)/r,C=(c(S,T+r,w)-z)/r,P=(c(S,T,w+r)-z)/r;o.setXYZ(x+M,E+C,I+P);var D=d/e*(b+z),F=-(o.dot(y)+D)/(f+e*o.normSquared()/v);s.set(o.mult(e*F)),_.applyImpulse(s)}},e.exports=n}),define("famous/physics/constraints/Distance",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.impulse=new o,this.normal=new o,this.diffP=new o,this.diffV=new o,s.call(this)}var s=t("./Constraint"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={anchor:null,length:0,minLength:0,period:0,dampingRatio:0};var r=Math.PI;n.prototype.setOptions=function(t){t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),void 0!==t.minLength&&(this.options.minLength=t.minLength)},n.prototype.setAnchor=function(t){this.options.anchor||(this.options.anchor=new o),this.options.anchor.set(t)},n.prototype.applyConstraint=function(t,i,e){var n,s,o=this.normal,a=this.diffP,h=this.diffV,c=this.impulse,p=this.options,u=p.dampingRatio,l=p.period,f=p.minLength;if(i){var d=i.velocity;n=i.position,s=i.inverseMass}else n=this.options.anchor,s=0;for(var _=this.options.length,y=0;y<t.length;y++){var g=t[y],v=g.velocity,m=g.position,O=g.inverseMass;a.set(m.sub(n)),o.set(a.normalize());var S=a.norm()-_;if(Math.abs(S)<f)return;h.set(i?v.sub(d):v);var T,w,b=1/(O+s);if(0===l)T=0,w=1;else{var x=4*b*r*u/l,E=4*b*r*r/(l*l);T=1/(x+e*E),w=e*E/(x+e*E)}var I=w/e*S,z=-(o.dot(h)+I)/(T+e/b);c.set(o.mult(e*z)),g.applyImpulse(c),i&&i.applyImpulse(c.mult(-1))}},e.exports=n}),define("famous/physics/constraints/Snap",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){s.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.pDiff=new o,this.vDiff=new o,this.impulse1=new o,this.impulse2=new o}var s=t("./Constraint"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,anchor:void 0};var r=Math.PI;n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof o&&(this.options.anchor=t.anchor),t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor))),void 0!==t.length&&(this.options.length=t.length),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.period&&(this.options.period=t.period),s.prototype.setOptions.call(this,t)},n.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,s=e.anchor||i.position,o=Math.pow(2*r/e.period,2),a=0,h=0;h<t.length;h++){var c=t[h],p=s.sub(c.position).norm()-n;a+=.5*o*p*p}return a},n.prototype.applyConstraint=function(t,i,e){for(var n=this.options,s=this.pDiff,o=this.vDiff,a=this.impulse1,h=this.impulse2,c=n.length,p=n.anchor||i.position,u=n.period,l=n.dampingRatio,f=0;f<t.length;f++){var d=t[f],_=d.position,y=d.velocity,g=d.mass,v=d.inverseMass;s.set(_.sub(p));var m,O=s.norm()-c;if(i){var S=i.inverseMass,T=i.velocity;o.set(y.sub(T)),m=1/(v+S)}else o.set(y),m=g;var w,b;if(0===this.options.period)w=0,b=1;else{var x=4*m*r*r/(u*u),E=4*m*r*l/u;b=e*x/(E+e*x),w=1/(E+e*x)}var I=b/e*O;s.normalize(-I).sub(o).mult(e/(w+e/m)).put(a),d.applyImpulse(a),i&&(a.mult(-1).put(h),i.applyImpulse(h))}},e.exports=n}),define("famous/physics/constraints/Surface",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.J=new o,this.impulse=new o,s.call(this)}var s=t("./Constraint"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={equation:void 0,period:0,dampingRatio:0};var r=1e-7,a=Math.PI;n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},n.prototype.applyConstraint=function(t,i,e){for(var n=this.impulse,s=this.J,o=this.options,h=o.equation,c=o.dampingRatio,p=o.period,u=0;u<t.length;u++){var l,f,d=t[u],_=d.velocity,y=d.position,g=d.mass;if(0===p)l=0,f=1;else{var v=4*g*a*c/p,m=4*g*a*a/(p*p);l=1/(v+e*m),f=e*m/(v+e*m)}var O=y.x,S=y.y,T=y.z,w=h(O,S,T),b=(h(O+r,y,y)-w)/r,x=(h(O,S+r,y)-w)/r,E=(h(O,S,y+r)-w)/r;s.setXYZ(b,x,E);var I=f/e*w,z=-(s.dot(_)+I)/(l+e*s.normSquared()/g);n.set(s.mult(e*z)),d.applyImpulse(n)}},e.exports=n}),define("famous/physics/constraints/Wall",["require","exports","module","./Constraint","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.diff=new c,this.impulse=new c,h.call(this)}function s(t,i){return i.dot(t)}function o(t){var i=this.options.normal,e=this.options.distance;return t.dot(i)+e}function r(t,i,e){var s=t.position,o=t.velocity,r=t.mass,a=this.options.normal,h=this.options.onContact,c=this.options.restitution,p=this.impulse,u=this.options.drift,l=-this.options.slop,f=0;if(this._eventOutput){var d={particle:t,wall:this,overlap:i,normal:a};this._eventOutput.emit("preCollision",d),this._eventOutput.emit("collision",d)}switch(h){case n.ON_CONTACT.REFLECT:var _=l>i?-((1+c)*a.dot(o)+u/e*(i-l))/(r*e+f):-((1+c)*a.dot(o))/(r*e+f);p.set(a.mult(e*_)),t.applyImpulse(p),t.setPosition(s.add(a.mult(-i)))}this._eventOutput&&this._eventOutput.emit("postCollision",d)}function a(t,i){var e=this.options.onContact,s=t.position,o=this.options.normal;e===n.ON_CONTACT.REFLECT&&t.setPosition(s.add(o.mult(-i)))}var h=t("./Constraint"),c=t("../../math/Vector");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.ON_CONTACT={REFLECT:0,SILENT:1},n.DEFAULT_OPTIONS={restitution:.5,drift:.5,slop:0,normal:[1,0,0],distance:0,onContact:n.ON_CONTACT.REFLECT},n.prototype.setOptions=function(t){void 0!==t.normal&&(t.normal instanceof c&&(this.options.normal=t.normal.clone()),t.normal instanceof Array&&(this.options.normal=new c(t.normal))),void 0!==t.restitution&&(this.options.restitution=t.restitution),void 0!==t.drift&&(this.options.drift=t.drift),void 0!==t.slop&&(this.options.slop=t.slop),void 0!==t.distance&&(this.options.distance=t.distance),void 0!==t.onContact&&(this.options.onContact=t.onContact)},n.prototype.applyConstraint=function(t,i,e){for(var n=this.options.normal,h=0;h<t.length;h++){var c=t[h],p=c.position,u=c.velocity,l=c.radius||0,f=o.call(this,p.add(n.mult(-l))),d=s.call(this,n,u);0>=f&&(0>d?r.call(this,c,f,e):a.call(this,c,f,e))}},e.exports=n}),define("famous/physics/constraints/Walls",["require","exports","module","./Constraint","./Wall","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),o.call(this,t.sides||this.options.sides),a.call(this)}function s(t,i,e){var s,o=n.SIDES;switch(parseInt(t)){case o.LEFT:s=i[0]*e[0];break;case o.TOP:s=i[1]*e[1];break;case o.FRONT:s=i[2]*e[2];break;case o.RIGHT:s=i[0]*(1-e[0]);break;case o.BOTTOM:s=i[1]*(1-e[1]);break;case o.BACK:s=i[2]*(1-e[2])}return s}function o(t){this.components={};for(var i=this.components,e=0;e<t.length;e++){var n=t[e];i[e]=new h({normal:p[n].clone(),distance:s(n,this.options.size,this.options.origin)})}}function r(t){this.forEach(function(i){i.setOptions(t)});for(var i in t)this.options[i]=t[i]}var a=t("./Constraint"),h=t("./Wall"),c=t("../../math/Vector");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.ON_CONTACT=h.ON_CONTACT,n.SIDES={LEFT:0,RIGHT:1,TOP:2,BOTTOM:3,FRONT:4,BACK:5,TWO_DIMENSIONAL:[0,1,2,3],THREE_DIMENSIONAL:[0,1,2,3,4,5]},n.DEFAULT_OPTIONS={sides:n.SIDES.TWO_DIMENSIONAL,size:[window.innerWidth,window.innerHeight,0],origin:[.5,.5,.5],drift:.5,slop:0,restitution:.5,onContact:n.ON_CONTACT.REFLECT};var p={0:new c(1,0,0),1:new c(-1,0,0),2:new c(0,1,0),3:new c(0,-1,0),4:new c(0,0,1),5:new c(0,0,-1)};n.prototype.setOptions=function(t){var i=!1;void 0!==t.restitution&&r.call(this,{restitution:t.restitution}),void 0!==t.drift&&r.call(this,{drift:t.drift}),void 0!==t.slop&&r.call(this,{slop:t.slop}),void 0!==t.onContact&&r.call(this,{onContact:t.onContact}),void 0!==t.size&&(i=!0),void 0!==t.sides&&(this.options.sides=t.sides),void 0!==t.origin&&(i=!0),i&&this.setSize(t.size,t.origin)},n.prototype.setSize=function(t,i){i=i||this.options.origin,i.length<3&&(i[2]=.5),this.forEach(function(e,n){var o=s(n,t,i);e.setOptions({distance:o})}),this.options.size=t,this.options.origin=i},n.prototype.applyConstraint=function(t,i,e){this.forEach(function(n){n.applyConstraint(t,i,e)})},n.prototype.forEach=function(t){var i=this.options.sides;for(var e in this.sides)t(i[e],e)},n.prototype.rotateZ=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateZ(t).put(e)})},n.prototype.rotateX=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateX(t).put(e)})},n.prototype.rotateY=function(t){this.forEach(function(i){var e=i.options.normal;e.rotateY(t).put(e)})},e.exports=n}),define("famous/physics/forces/Force",["require","exports","module","../../math/Vector","../../core/EventHandler"],function(t,i,e){function n(t){this.force=new s(t),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput)}var s=t("../../math/Vector"),o=t("../../core/EventHandler");n.prototype.setOptions=function(t){this._eventOutput.emit("change",t)},n.prototype.applyForce=function(t){for(var i=t.length;i--;)t[i].applyForce(this.force)},n.prototype.getEnergy=function(){return 0},e.exports=n}),define("famous/physics/forces/Drag",["require","exports","module","./Force"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),s.call(this)}var s=t("./Force");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.DEFAULT_OPTIONS={strength:.01,forceFunction:n.FORCE_FUNCTIONS.LINEAR},n.prototype.applyForce=function(t){var i,e,n=this.options.strength,s=this.options.forceFunction,o=this.force;for(i=0;i<t.length;i++)e=t[i],s(e.velocity).mult(-n).put(o),e.applyForce(o)},n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.exports=n}),define("famous/physics/forces/Repulsion",["require","exports","module","./Force","../../math/Vector"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new o,s.call(this)}var s=t("./Force"),o=t("../../math/Vector");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DECAY_FUNCTIONS={LINEAR:function(t,i){return Math.max(1-1/i*t,0)},MORSE:function(t,i){var e=0===i?100:i,n=t+e*(1-Math.log(2));return Math.max(1-Math.pow(1-Math.exp(n/e-1),2),0)},INVERSE:function(t,i){return 1/(1-i+t)},GRAVITY:function(t,i){return 1/(1-i+t*t)}},n.DEFAULT_OPTIONS={strength:1,anchor:void 0,range:[0,1/0],cutoff:0,cap:1/0,decayFunction:n.DECAY_FUNCTIONS.GRAVITY},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof o&&(this.options.anchor=t.anchor.position),t.anchor instanceof Array&&(this.options.anchor=new o(t.anchor)),delete t.anchor);for(var i in t)this.options[i]=t[i]},n.prototype.applyForce=function(t,i){var e=this.options,n=this.force,s=this.disp,o=e.strength,r=e.anchor||i.position,a=e.cap,h=e.cutoff,c=e.range[0],p=e.range[1],u=e.decayFunction;if(0!==o)for(var l,f,d,_,y=t.length;y--;)l=t[y],l!==i&&(f=l.mass,d=l.position,s.set(d.sub(r)),_=s.norm(),p>_&&_>c&&(n.set(s.normalize(o*f*u(_,h)).cap(a)),l.applyForce(n)))},e.exports=n}),define("famous/physics/forces/RotationalDrag",["require","exports","module","./Drag"],function(t,i,e){function n(t){s.call(this,t)}var s=t("./Drag");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS=s.DEFAULT_OPTIONS,n.FORCE_FUNCTIONS=s.FORCE_FUNCTIONS,n.FORCE_FUNCTIONS={LINEAR:function(t){return t},QUADRATIC:function(t){return t.mult(t.norm())}},n.prototype.applyForce=function(t){var i,e,n=this.options.strength,s=this.options.forceFunction,o=this.force;for(i=0;i<t.length;i++)e=t[i],s(e.angularVelocity).mult(-100*n).put(o),e.applyTorque(o)},n.prototype.setOptions=function(t){for(var i in t)this.options[i]=t[i]},e.exports=n}),define("famous/physics/forces/Spring",["require","exports","module","./Force","../../math/Vector"],function(t,i,e){function n(t){a.call(this),this.options=Object.create(this.constructor.DEFAULT_OPTIONS),t&&this.setOptions(t),this.disp=new h(0,0,0),r.call(this)}function s(){var t=this.options;t.stiffness=Math.pow(2*c/t.period,2)}function o(){var t=this.options;t.damping=4*c*t.dampingRatio/t.period}function r(){s.call(this),o.call(this)}var a=t("./Force"),h=t("../../math/Vector");n.prototype=Object.create(a.prototype),n.prototype.constructor=n;var c=Math.PI,p=150;n.FORCE_FUNCTIONS={FENE:function(t,i){var e=.99*i,n=Math.max(Math.min(t,e),-e);return n/(1-n*n/(i*i))},HOOK:function(t){return t}},n.DEFAULT_OPTIONS={period:300,dampingRatio:.1,length:0,maxLength:1/0,anchor:void 0,forceFunction:n.FORCE_FUNCTIONS.HOOK},n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor.position instanceof h&&(this.options.anchor=t.anchor.position),t.anchor instanceof h&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new h(t.anchor))),void 0!==t.period&&(t.period<p&&(t.period=p,console.warn("The period of a SpringTransition is capped at "+p+" ms. Use a SnapTransition for faster transitions")),this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),r.call(this),a.prototype.setOptions.call(this,t)},n.prototype.applyForce=function(t,i){var e,n,s,o,r,a,h=this.force,c=this.disp,p=this.options,u=p.stiffness,l=p.damping,f=p.length,d=p.maxLength,_=p.anchor||i.position,y=p.forceFunction;for(e=0;e<t.length;e++){if(n=t[e],s=n.position,o=n.velocity,_.sub(s).put(c),r=c.norm()-f,0===r)return;a=n.mass,u*=a,l*=a,c.normalize(u*y(r,d)).put(h),l&&(i?h.add(o.sub(i.velocity).mult(-l)).put(h):h.add(o.mult(-l)).put(h)),n.applyForce(h),i&&i.applyForce(h.mult(-1))}},n.prototype.getEnergy=function(t,i){for(var e=this.options,n=e.length,s=i?i.position:e.anchor,o=e.stiffness,r=0,a=0;a<t.length;a++){var h=t[a],c=s.sub(h.position).norm()-n;r+=.5*o*c*c}return r},e.exports=n}),define("famous/physics/forces/RotationalSpring",["require","exports","module","./Force","./Spring","../../math/Quaternion"],function(t,i,e){function n(t){h.call(this,t)}function s(){var t=this.options;t.stiffness=Math.pow(2*p/t.period,2)}function o(){var t=this.options;t.damping=4*p*t.dampingRatio/t.period}function r(){s.call(this),o.call(this)}var a=t("./Force"),h=t("./Spring"),c=t("../../math/Quaternion");n.prototype=Object.create(h.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS=h.DEFAULT_OPTIONS,n.FORCE_FUNCTIONS=h.FORCE_FUNCTIONS;var p=Math.PI;n.prototype.setOptions=function(t){void 0!==t.anchor&&(t.anchor instanceof c&&(this.options.anchor=t.anchor),t.anchor instanceof Array&&(this.options.anchor=new c(t.anchor))),void 0!==t.period&&(this.options.period=t.period),void 0!==t.dampingRatio&&(this.options.dampingRatio=t.dampingRatio),void 0!==t.length&&(this.options.length=t.length),void 0!==t.forceFunction&&(this.options.forceFunction=t.forceFunction),void 0!==t.maxLength&&(this.options.maxLength=t.maxLength),r.call(this),a.prototype.setOptions.call(this,t)},n.prototype.applyForce=function(t){var i,e,n,s,o=this.force,r=this.options,a=this.disp,h=r.stiffness,c=r.damping,p=r.length,u=r.anchor,l=r.forceFunction,f=r.maxLength;for(i=0;i<t.length;i++){if(e=t[i],a.set(u.sub(e.orientation)),n=a.norm()-p,0===n)return;s=e.mass,h*=s,c*=s,o.set(a.normalize(h*l(n,f))),c&&o.add(e.angularVelocity.mult(-c)).put(o),e.applyTorque(o)}},n.prototype.getEnergy=function(t){for(var i=this.options,e=i.length,n=i.anchor,s=i.stiffness,o=0,r=0;r<t.length;r++){var a=t[r],h=n.sub(a.orientation).norm()-e;o+=.5*s*h*h}return o},e.exports=n}),define("famous/physics/forces/VectorField",["require","exports","module","./Force","../../math/Vector"],function(t,i,e){function n(t){o.call(this),this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t),this.evaluation=new r}function s(t){var i=n.FIELDS;switch(t){case i.CONSTANT:this.options.direction?this.options.direction instanceof Array&&(this.options.direction=new r(this.options.direction)):this.options.direction=new r(0,1,0);break;case i.POINT_ATTRACTOR:this.options.position?this.options.position instanceof Array&&(this.options.position=new r(this.options.position)):this.options.position=new r(0,0,0)}}var o=t("./Force"),r=t("../../math/Vector");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.FIELDS={CONSTANT:function(t,i){i.direction.put(this.evaluation)},LINEAR:function(t){t.put(this.evaluation)},RADIAL:function(t){t.mult(-1).put(this.evaluation)},POINT_ATTRACTOR:function(t,i){i.position.sub(t).put(this.evaluation)}},n.DEFAULT_OPTIONS={strength:.01,field:n.FIELDS.CONSTANT},n.prototype.setOptions=function(t){void 0!==t.strength&&(this.options.strength=t.strength),void 0!==t.field&&(this.options.field=t.field,s.call(this,this.options.field))},n.prototype.applyForce=function(t){var i,e,n=this.force,s=this.options.strength,o=this.options.field;for(i=0;i<t.length;i++)e=t[i],o.call(this,e.position,this.options),this.evaluation.mult(e.mass*s).put(n),e.applyForce(n)},n.prototype.getEnergy=function(t){var i,e,s=this.options.field,o=n.FIELDS,r=0;switch(s){case o.CONSTANT:r=t.length*this.options.direction.norm();break;case o.RADIAL:for(i=0;i<t.length;i++)e=t[i],r+=e.position.norm();break;case o.POINT_ATTRACTOR:for(i=0;i<t.length;i++)e=t[i],r+=e.position.sub(this.options.position).norm()}return r*=this.options.strength},e.exports=n}),define("famous/surfaces/CanvasSurface",["require","exports","module","../core/Surface"],function(t,i,e){function n(t){t&&t.canvasSize&&(this._canvasSize=t.canvasSize),s.apply(this,arguments),this._canvasSize||(this._canvasSize=this.getSize()),this._backBuffer=document.createElement("canvas"),this._canvasSize&&(this._backBuffer.width=this._canvasSize[0],this._backBuffer.height=this._canvasSize[1]),this._contextId=void 0}var s=t("../core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="canvas",n.prototype.elementClass="famous-surface",n.prototype.setContent=function(){},n.prototype.deploy=function(t){this._canvasSize&&(t.width=this._canvasSize[0],t.height=this._canvasSize[1]),"2d"===this._contextId&&(t.getContext(this._contextId).drawImage(this._backBuffer,0,0),this._backBuffer.width=0,this._backBuffer.height=0)},n.prototype.recall=function(t){this.getSize();this._backBuffer.width=t.width,this._backBuffer.height=t.height,"2d"===this._contextId&&(this._backBuffer.getContext(this._contextId).drawImage(t,0,0),t.width=0,t.height=0)},n.prototype.getContext=function(t){return this._contextId=t,this._currentTarget?this._currentTarget.getContext(t):this._backBuffer.getContext(t)},n.prototype.setSize=function(t,i){s.prototype.setSize.apply(this,arguments),i&&(this._canvasSize=[i[0],i[1]]),this._currentTarget&&(this._currentTarget.width=this._canvasSize[0],this._currentTarget.height=this._canvasSize[1])},e.exports=n}),define("famous/surfaces/ContainerSurface",["require","exports","module","../core/Surface","../core/Context"],function(t,i,e){function n(t){s.call(this,t),this._container=document.createElement("div"),this._container.classList.add("famous-group"),this._container.classList.add("famous-container-group"),this._shouldRecalculateSize=!1,this.context=new o(this._container),this.setContent(this._container)}var s=t("../core/Surface"),o=t("../core/Context");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="div",n.prototype.elementClass="famous-surface",n.prototype.add=function(){return this.context.add.apply(this.context,arguments)},n.prototype.render=function(){return this._sizeDirty&&(this._shouldRecalculateSize=!0),s.prototype.render.apply(this,arguments)},n.prototype.deploy=function(){return this._shouldRecalculateSize=!0,s.prototype.deploy.apply(this,arguments)},n.prototype.commit=function(){var t=this._size?[this._size[0],this._size[1]]:null,i=s.prototype.commit.apply(this,arguments);return(this._shouldRecalculateSize||t&&(this._size[0]!==t[0]||this._size[1]!==t[1]))&&(this.context.setSize(),this._shouldRecalculateSize=!1),this.context.update(),i},e.exports=n}),define("famous/surfaces/FormContainerSurface",["require","exports","module","./ContainerSurface"],function(t,i,e){function n(t){t&&(this._method=t.method||""),s.apply(this,arguments)}var s=t("./ContainerSurface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="form",n.prototype.deploy=function(t){return this._method&&(t.method=this._method),s.prototype.deploy.apply(this,arguments)},e.exports=n}),define("famous/surfaces/ImageSurface",["require","exports","module","../core/Surface"],function(t,i,e){function n(){this._imageUrl=void 0,s.apply(this,arguments)}var s=t("../core/Surface"),o=[],r=[],a=[],h=!0;n.enableCache=function(){h=!0},n.disableCache=function(){h=!1},n.clearCache=function(){o=[],r=[],a=[]},n.getCache=function(){return{urlCache:o,countCache:r,nodeCache:r}},n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="img",n.prototype.elementClass="famous-surface",n.prototype.setContent=function(t){var i=o.indexOf(this._imageUrl);-1!==i&&(1===r[i]?(o.splice(i,1),r.splice(i,1),a.splice(i,1)):r[i]--),i=o.indexOf(t),-1===i?(o.push(t),r.push(1)):r[i]++,this._imageUrl=t,this._contentDirty=!0},n.prototype.deploy=function(t){var i=o.indexOf(this._imageUrl);if(void 0===a[i]&&h){var e=new Image;e.src=this._imageUrl||"",a[i]=e}t.src=this._imageUrl||""},n.prototype.recall=function(t){t.src=""},e.exports=n}),define("famous/surfaces/InputSurface",["require","exports","module","../core/Surface"],function(t,i,e){function n(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._type=t.type||"text",this._name=t.name||"",s.apply(this,arguments),this.on("click",this.focus.bind(this)),window.addEventListener("click",function(t){t.target!==this._currentTarget&&this.blur()}.bind(this))}var s=t("../core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="input",n.prototype.elementClass="famous-surface",n.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},n.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},n.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},n.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},n.prototype.setType=function(t){return this._type=t,this._contentDirty=!0,this},n.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},n.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},n.prototype.getName=function(){return this._name},n.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),t.value=this._value,t.type=this._type,t.name=this._name},e.exports=n}),define("famous/surfaces/SubmitInputSurface",["require","exports","module","./InputSurface"],function(t,i,e){function n(t){s.apply(this,arguments),this._type="submit",t&&t.onClick&&this.setOnClick(t.onClick)}var s=t("./InputSurface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.setOnClick=function(t){this.onClick=t},n.prototype.deploy=function(t){this.onclick&&(t.onClick=this.onClick),s.prototype.deploy.apply(this,arguments)},e.exports=n}),define("famous/surfaces/TextareaSurface",["require","exports","module","../core/Surface"],function(t,i,e){function n(t){this._placeholder=t.placeholder||"",this._value=t.value||"",this._name=t.name||"",this._wrap=t.wrap||"",this._cols=t.cols||"",this._rows=t.rows||"",s.apply(this,arguments),this.on("click",this.focus.bind(this))}var s=t("../core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.elementType="textarea",n.prototype.elementClass="famous-surface",n.prototype.setPlaceholder=function(t){return this._placeholder=t,this._contentDirty=!0,this},n.prototype.focus=function(){return this._currentTarget&&this._currentTarget.focus(),this},n.prototype.blur=function(){return this._currentTarget&&this._currentTarget.blur(),this},n.prototype.setValue=function(t){return this._value=t,this._contentDirty=!0,this},n.prototype.getValue=function(){return this._currentTarget?this._currentTarget.value:this._value},n.prototype.setName=function(t){return this._name=t,this._contentDirty=!0,this},n.prototype.getName=function(){return this._name},n.prototype.setWrap=function(t){return this._wrap=t,this._contentDirty=!0,this},n.prototype.setColumns=function(t){return this._cols=t,this._contentDirty=!0,this},n.prototype.setRows=function(t){return this._rows=t,this._contentDirty=!0,this
},n.prototype.deploy=function(t){""!==this._placeholder&&(t.placeholder=this._placeholder),""!==this._value&&(t.value=this._value),""!==this._name&&(t.name=this._name),""!==this._wrap&&(t.wrap=this._wrap),""!==this._cols&&(t.cols=this._cols),""!==this._rows&&(t.rows=this._rows)},e.exports=n}),define("famous/surfaces/VideoSurface",["require","exports","module","../core/Surface"],function(t,i,e){function n(t){s.apply(this,arguments),this._videoUrl=void 0,this.options=Object.create(n.DEFAULT_OPTIONS),t&&this.setOptions(t)}var s=t("../core/Surface");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={autoplay:!1},n.prototype.elementType="video",n.prototype.elementClass="famous-surface",n.prototype.setOptions=function(t){t.size&&this.setSize(t.size),t.classes&&this.setClasses(t.classes),t.properties&&this.setProperties(t.properties),t.autoplay&&(this.options.autoplay=t.autoplay),t.src&&(this._videoUrl=t.src,this._contentDirty=!0)},n.prototype.setContent=function(t){this._videoUrl=t,this._contentDirty=!0},n.prototype.deploy=function(t){t.src=this._videoUrl,t.autoplay=this.options.autoplay},n.prototype.recall=function(t){t.src=""},e.exports=n}),define("famous/transitions/CachedMap",["require","exports","module"],function(t,i,e){function n(t){this._map=t||null,this._cachedOutput=null,this._cachedInput=Number.NaN}n.create=function(t){var i=new n(t);return i.get.bind(i)},n.prototype.get=function(t){return t!==this._cachedInput&&(this._cachedInput=t,this._cachedOutput=this._map(t)),this._cachedOutput},e.exports=n}),define("famous/transitions/Easing",["require","exports","module"],function(t,i,e){var n={inQuad:function(t){return t*t},outQuad:function(t){return-(t-=1)*t+1},inOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},inQuart:function(t){return t*t*t*t},outQuart:function(t){return-(--t*t*t*t-1)},inOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return--t*t*t*t*t+1},inOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},inSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},outSine:function(t){return Math.sin(t*(Math.PI/2))},inOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1- --t*t)},inOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)))},outElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:1===t?1:(e||(e=.3),i=e/(2*Math.PI)*Math.asin(1/n),n*Math.pow(2,-10*t)*Math.sin(2*(t-i)*Math.PI/e)+1)},inOutElastic:function(t){var i=1.70158,e=0,n=1;return 0===t?0:2===(t/=.5)?1:(e||(e=.3*1.5),i=e/(2*Math.PI)*Math.asin(1/n),1>t?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-i)*Math.PI/e)*.5+1)},inBack:function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)},outBack:function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1},inOutBack:function(t,i){return void 0===i&&(i=1.70158),(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},inBounce:function(t){return 1-n.outBounce(1-t)},outBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*n.inBounce(2*t):.5*n.outBounce(2*t-1)+.5}};e.exports=n}),define("famous/transitions/SnapTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/constraints/Snap","../math/Vector"],function(t,i,e){function n(t){t=t||0,this.endState=new m(t),this.initState=new m,this._dimensions=1,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.particle=new g,this.spring=new v({anchor:this.endState}),this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(t){this.endState.set(t),o.call(this)}function a(){this.PE.wake()}function h(){this.PE.sleep()}function c(t){this.particle.position.set(t)}function p(t){this.particle.velocity.set(t)}function u(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(t){var i=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),p.call(this,t.velocity)}function _(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(c.call(this,this.endState),p.call(this,[0,0,0]),h.call(this))}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/constraints/Snap"),m=t("../math/Vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:100,dampingRatio:.2,velocity:0},n.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),c.call(this,t),r.call(this,t),i&&p.call(this,i),f.call(this,void 0)},n.prototype.getVelocity=function(){return l.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.isActive=function(){return!this.PE.isSleeping()},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return _.call(this),u.call(this)},n.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,a.call(this),d.call(this,i),r.call(this,t),void f.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=n}),define("famous/transitions/SpringTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Spring","../math/Vector"],function(t,i,e){function n(t){t=t||0,this.endState=new m(t),this.initState=new m,this._dimensions=void 0,this._restTolerance=1e-10,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.spring=new v({anchor:this.endState}),this.particle=new g,this.PE.addBody(this.particle),this.PE.attach(this.spring,this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(t){this.particle.setPosition(t)}function r(t){this.particle.setVelocity(t)}function a(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function h(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function c(t){this._callback=t}function p(){this.PE.wake()}function u(){this.PE.sleep()}function l(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else s.call(this)<this._absRestTolerance&&(o.call(this,this.endState),r.call(this,[0,0,0]),u.call(this))}function f(t){var i=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),t.period<150&&(t.period=150,console.warn("The period of a SpringTransition is capped at 150 ms. Use a SnapTransition for faster transitions")),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),r.call(this,t.velocity)}function d(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function _(t){this.endState.set(t),d.call(this)}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Spring"),m=t("../math/Vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0},n.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),o.call(this,t),_.call(this,t),i&&r.call(this,i),c.call(this,void 0)},n.prototype.getVelocity=function(){return h.call(this)},n.prototype.setVelocity=function(t){this.call(this,r(t))},n.prototype.isActive=function(){return!this.PE.isSleeping()},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return l.call(this),a.call(this)},n.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,p.call(this),f.call(this,i),_.call(this,t),void c.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=n}),define("famous/transitions/WallTransition",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Spring","../physics/constraints/Wall","../math/Vector"],function(t,i,e){function n(t){t=t||0,this.endState=new O(t),this.initState=new O,this.spring=new v({anchor:this.endState}),this.wall=new m,this._restTolerance=1e-10,this._dimensions=1,this._absRestTolerance=this._restTolerance,this._callback=void 0,this.PE=new y,this.particle=new g,this.PE.addBody(this.particle),this.PE.attach([this.wall,this.spring],this.particle)}function s(){return this.particle.getEnergy()+this.spring.getEnergy([this.particle])}function o(){var t=this.endState.sub(this.initState).normSquared();this._absRestTolerance=0===t?this._restTolerance:this._restTolerance*t}function r(){this.PE.wake()}function a(){this.PE.sleep()}function h(t){this.endState.set(t);var i=this.endState.sub(this.initState).norm();this.wall.setOptions({distance:this.endState.norm(),normal:0===i?this.particle.velocity.normalize(-1):this.endState.sub(this.initState).normalize(-1)}),o.call(this)}function c(t){this.particle.position.set(t)}function p(t){this.particle.velocity.set(t)}function u(){return 0===this._dimensions?this.particle.getPosition1D():this.particle.getPosition()}function l(){return 0===this._dimensions?this.particle.getVelocity1D():this.particle.getVelocity()}function f(t){this._callback=t}function d(){if(this.PE.isSleeping()){if(this._callback){var t=this._callback;this._callback=void 0,t()}}else{var i=s.call(this);i<this._absRestTolerance&&(a.call(this),c.call(this,this.endState),p.call(this,[0,0,0]))}}function _(t){var i=n.DEFAULT_OPTIONS;void 0===t.period&&(t.period=i.period),void 0===t.dampingRatio&&(t.dampingRatio=i.dampingRatio),void 0===t.velocity&&(t.velocity=i.velocity),void 0===t.restitution&&(t.restitution=i.restitution),this.spring.setOptions({period:t.period,dampingRatio:t.dampingRatio}),this.wall.setOptions({restitution:t.restitution}),p.call(this,t.velocity)}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Spring"),m=t("../physics/constraints/Wall"),O=t("../math/Vector");n.SUPPORTS_MULTIPLE=3,n.DEFAULT_OPTIONS={period:300,dampingRatio:.5,velocity:0,restitution:.5},n.prototype.reset=function(t,i){this._dimensions=t instanceof Array?t.length:0,this.initState.set(t),c.call(this,t),i&&p.call(this,i),h.call(this,t),f.call(this,void 0)},n.prototype.getVelocity=function(){return l.call(this)},n.prototype.setVelocity=function(t){this.call(this,p(t))},n.prototype.isActive=function(){return!this.PE.isSleeping()},n.prototype.halt=function(){this.set(this.get())},n.prototype.get=function(){return d.call(this),u.call(this)},n.prototype.set=function(t,i,e){return i?(this._dimensions=t instanceof Array?t.length:0,r.call(this),_.call(this,i),h.call(this,t),void f.call(this,e)):(this.reset(t),void(e&&e()))},e.exports=n}),define("famous/utilities/KeyCodes",["require","exports","module"],function(t,i,e){var n={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39,UP_ARROW:38,DOWN_ARROW:40,SPACE:32,SHIFT:16,TAB:9};e.exports=n}),define("famous/utilities/Timer",["require","exports","module","../core/Engine"],function(t,i,e){function n(t){return p.on(u,t),t}function s(t,i){var e=l(),s=function(){var n=l();n-e>=i&&(t.apply(this,arguments),p.removeListener(u,s))};return n(s)}function o(t,i){var e=l(),s=function(){var n=l();n-e>=i&&(t.apply(this,arguments),e=l())};return n(s)}function r(t,i){if(void 0===i)return void 0;var e=function(){i--,0>=i&&(t.apply(this,arguments),h(e))};return n(e)}function a(t,i){i=i||1;var e=i,s=function(){i--,0>=i&&(t.apply(this,arguments),i=e)};return n(s)}function h(t){p.removeListener(u,t)}function c(t,i){var e,n,o,r,a;return function(){n=this,a=arguments,o=l();var c=function(){var h=l-o;i>h?e=s(c,i-h):(e=null,r=t.apply(n,a))};return h(e),e=s(c,i),r}}var p=t("../core/Engine"),u="prerender",l=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};e.exports={setTimeout:s,setInterval:o,debounce:c,after:r,every:a,clear:h}}),define("famous/views/ContextualView",["require","exports","module","../core/Entity","../core/Transform","../core/EventHandler","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this._eventInput=new o,this._eventOutput=new o,o.setInputHandler(this,this._eventInput),o.setOutputHandler(this,this._eventOutput),this._id=s.register(this)}var s=t("../core/Entity"),o=(t("../core/Transform"),t("../core/EventHandler")),r=t("../core/OptionsManager");n.DEFAULT_OPTIONS={},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.getOptions=function(t){return this._optionsManager.getOptions(t)},n.prototype.render=function(){return this._id},n.prototype.commit=function(){},e.exports=n}),define("famous/views/SequentialLayout",["require","exports","module","../core/OptionsManager","../core/Transform","../core/ViewSequence","../utilities/Utility"],function(t,i,e){function n(t){this._items=null,this._size=null,this._outputFunction=n.DEFAULT_OUTPUT_FUNCTION,this.options=a.clone(this.constructor.DEFAULT_OPTIONS||n.DEFAULT_OPTIONS),this.optionsManager=new s(this.options),t&&this.setOptions(t)}var s=t("../core/OptionsManager"),o=t("../core/Transform"),r=t("../core/ViewSequence"),a=t("../utilities/Utility");n.DEFAULT_OPTIONS={direction:a.Direction.Y,itemSpacing:0},n.DEFAULT_OUTPUT_FUNCTION=function(t,i){var e=this.options.direction===a.Direction.X?o.translate(i,0):o.translate(0,i);return{transform:e,target:t.render()}},n.prototype.getSize=function(){return this._size||this.render(),this._size},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new r(t)),this._items=t,this},n.prototype.setOptions=function(){return this.optionsManager.setOptions.apply(this.optionsManager,arguments),this},n.prototype.setOutputFunction=function(t){return this._outputFunction=t,this},n.prototype.render=function(){var t=0,i=1^this.options.direction,e=this._items,n=null,s=[],o={},r=[],a=0;for(this._size=[0,0];e&&(n=e.get());)n.getSize&&(s=n.getSize()),o=this._outputFunction.call(this,n,t,a++),r.push(o),s&&(s[this.options.direction]&&(t+=s[this.options.direction]),s[i]>this._size[i]&&(this._size[i]=s[i])),e=e.getNext(),this.options.itemSpacing&&e&&(t+=this.options.itemSpacing);return this._size[this.options.direction]=t,r},e.exports=n}),define("famous/views/Deck",["require","exports","module","../core/Transform","../core/OptionsManager","../transitions/Transitionable","../utilities/Utility","./SequentialLayout"],function(t,i,e){function n(){p.apply(this,arguments),this.state=new h(0),this._isOpen=!1,this.setOutputFunction(function(t,i,e){var n=s.call(this),o=this.options.direction===c.Direction.X?r.translate(n*i,0,.001*(n-1)*i):r.translate(0,n*i,.001*(n-1)*i),a=t.render();if(this.options.stackRotation){var h=this.options.stackRotation*e*(1-n);a={transform:r.rotateZ(h),origin:[.5,.5],target:a}}return{transform:o,size:t.getSize(),target:a}})}function s(t){return t?this._isOpen?1:0:this.state.get()}function o(t,i,e){this.state.halt(),this.state.set(t,i,e)}var r=t("../core/Transform"),a=t("../core/OptionsManager"),h=t("../transitions/Transitionable"),c=t("../utilities/Utility"),p=t("./SequentialLayout");n.prototype=Object.create(p.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS=a.patch(p.DEFAULT_OPTIONS,{transition:{curve:"easeOutBounce",duration:500},stackRotation:0}),n.prototype.getSize=function(){var t=p.prototype.getSize.apply(this,arguments),i=this._items?this._items.get().getSize():[0,0];i||(i=[0,0]);var e=s.call(this),n=1-e;return[i[0]*n+t[0]*e,i[1]*n+t[1]*e]},n.prototype.isOpen=function(){return this._isOpen},n.prototype.open=function(t){this._isOpen=!0,o.call(this,1,this.options.transition,t)},n.prototype.close=function(t){this._isOpen=!1,o.call(this,0,this.options.transition,t)},n.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},e.exports=n}),define("famous/views/DrawerLayout",["require","exports","module","../core/RenderNode","../core/Transform","../core/OptionsManager","../transitions/Transitionable","../core/EventHandler"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new u(this.options),t&&this.setOptions(t),this._position=new l(0),this._direction=s(this.options.side),this._orientation=o(this.options.side),this._isOpen=!1,this._cachedLength=0,this.drawer=new c,this.content=new c,this._eventInput=new f,this._eventOutput=new f,f.setInputHandler(this,this._eventInput),f.setOutputHandler(this,this._eventOutput),this._eventInput.on("update",a.bind(this)),this._eventInput.on("end",h.bind(this))}function s(t){var i=n.SIDES;return t===i.LEFT||t===i.RIGHT?d:_}function o(t){var i=n.SIDES;return t===i.LEFT||t===i.TOP?1:-1}function r(t){var i,e=this.options;if(e.drawerLength)i=e.drawerLength;else{var n=t.getSize();i=n?n[this._direction]:e.drawerLength}return this._orientation*i}function a(t){var i,e,n=this.getPosition()+t.delta;this._cachedLength=r.call(this,this.drawer),1===this._orientation?(i=0,e=this._cachedLength):(i=this._cachedLength,e=0),n>e?n=e:i>n&&(n=i),this.setPosition(n)}function h(t){var i=t.velocity,e=this._orientation*this.getPosition(),n=this.options,s=this._orientation*this._cachedLength,o=n.positionThreshold||s/2,r=n.velocityThreshold;if(n.transition instanceof Object&&(n.transition.velocity=t.velocity),0===e)return void(this._isOpen=!1);if(e===s)return void(this._isOpen=!0);var a=Math.abs(i)>r||!this._isOpen&&e>o||this._isOpen&&o>e;a?this.toggle():this.reset()}var c=t("../core/RenderNode"),p=t("../core/Transform"),u=t("../core/OptionsManager"),l=t("../transitions/Transitionable"),f=t("../core/EventHandler"),d=0,_=1;n.SIDES={LEFT:0,TOP:1,RIGHT:2,BOTTOM:3},n.DEFAULT_OPTIONS={side:n.SIDES.LEFT,drawerLength:0,velocityThreshold:0,positionThreshold:0,transition:!0},n.prototype.setOptions=function(t){this._optionsManager.setOptions(t),void 0!==t.side&&(this._direction=s(t.side),this._orientation=o(t.side))},n.prototype.open=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this._cachedLength=r.call(this,this.drawer),this.setPosition(this._cachedLength,t,i),this._isOpen||(this._isOpen=!0,this._eventOutput.emit("open"))},n.prototype.close=function(t,i){t instanceof Function&&(i=t),void 0===t&&(t=this.options.transition),this.setPosition(0,t,i),this._isOpen&&(this._isOpen=!1,this._eventOutput.emit("close"))},n.prototype.setPosition=function(t,i,e){this._position.isActive()&&this._position.halt(),this._position.set(t,i,e)},n.prototype.getPosition=function(){return this._position.get()},n.prototype.setProgress=function(t,i,e){return this._position.set(t*this._cachedLength,i,e)},n.prototype.getProgress=function(){return this._position.get()/this._cachedLength},n.prototype.toggle=function(t){this._isOpen?this.close(t):this.open(t)},n.prototype.reset=function(t){this._isOpen?this.open(t):this.close(t)},n.prototype.isOpen=function(){return this._isOpen},n.prototype.render=function(){var t=this.getPosition();(!this._isOpen&&0>t&&1===this._orientation||t>0&&-1===this._orientation)&&(t=0,this.setPosition(t));var i=this._direction===d?p.translate(t,0,0):p.translate(0,t,0);return[{transform:p.behind,target:this.drawer.render()},{transform:i,target:this.content.render()}]},e.exports=n}),define("famous/views/RenderController",["require","exports","module","../core/Modifier","../core/RenderNode","../core/Transform","../transitions/Transitionable","../core/View"],function(t,i,e){function n(){c.apply(this,arguments),this._showing=-1,this._outgoingRenderables=[],this._nextRenderable=null,this._renderables=[],this._nodes=[],this._modifiers=[],this._states=[],this.inTransformMap=n.DefaultMap.transform,this.inOpacityMap=n.DefaultMap.opacity,this.inOriginMap=n.DefaultMap.origin,this.outTransformMap=n.DefaultMap.transform,this.outOpacityMap=n.DefaultMap.opacity,this.outOriginMap=n.DefaultMap.origin,this._output=[]}function s(t,i){return t(i.get())}var o=t("../core/Modifier"),r=t("../core/RenderNode"),a=t("../core/Transform"),h=t("../transitions/Transitionable"),c=t("../core/View");n.prototype=Object.create(c.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={inTransition:!0,outTransition:!0,overlap:!0},n.DefaultMap={transform:function(){return a.identity},opacity:function(t){return t},origin:null},n.prototype.inTransformFrom=function(t){if(t instanceof Function)this.inTransformMap=t;else{if(!t||!t.get)throw Error("inTransformFrom takes only function or getter object");this.inTransformMap=t.get.bind(t)}return this},n.prototype.inOpacityFrom=function(t){if(t instanceof Function)this.inOpacityMap=t;else{if(!t||!t.get)throw Error("inOpacityFrom takes only function or getter object");this.inOpacityMap=t.get.bind(t)}return this},n.prototype.inOriginFrom=function(t){if(t instanceof Function)this.inOriginMap=t;else{if(!t||!t.get)throw Error("inOriginFrom takes only function or getter object");this.inOriginMap=t.get.bind(t)}return this},n.prototype.outTransformFrom=function(t){if(t instanceof Function)this.outTransformMap=t;else{if(!t||!t.get)throw Error("outTransformFrom takes only function or getter object");this.outTransformMap=t.get.bind(t)}return this},n.prototype.outOpacityFrom=function(t){if(t instanceof Function)this.outOpacityMap=t;else{if(!t||!t.get)throw Error("outOpacityFrom takes only function or getter object");this.outOpacityMap=t.get.bind(t)}return this},n.prototype.outOriginFrom=function(t){if(t instanceof Function)this.outOriginMap=t;else{if(!t||!t.get)throw Error("outOriginFrom takes only function or getter object");this.outOriginMap=t.get.bind(t)}return this},n.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=null),this._showing>=0){if(!this.options.overlap)return void(this._nextRenderable?this._nextRenderable=t:(this._nextRenderable=t,this.hide(function(){this._nextRenderable===t&&this.show(this._nextRenderable,e),this._nextRenderable=null})));this.hide()}var n=null,a=this._renderables.indexOf(t);if(a>=0){this._showing=a,n=this._states[a],n.halt();var c=this._outgoingRenderables.indexOf(t);c>=0&&this._outgoingRenderables.splice(c,1)}else{n=new h(0);var p=new o({transform:this.inTransformMap?s.bind(this,this.inTransformMap,n):null,opacity:this.inOpacityMap?s.bind(this,this.inOpacityMap,n):null,origin:this.inOriginMap?s.bind(this,this.inOriginMap,n):null}),u=new r;u.add(p).add(t),this._showing=this._nodes.length,this._nodes.push(u),this._modifiers.push(p),this._states.push(n),this._renderables.push(t)}i||(i=this.options.inTransition),n.set(1,i,e)},n.prototype.hide=function(t,i){if(!(this._showing<0)){var e=this._showing;this._showing=-1,t instanceof Function&&(i=t,t=void 0);var n=this._nodes[e],o=this._modifiers[e],r=this._states[e],a=this._renderables[e];o.transformFrom(this.outTransformMap?s.bind(this,this.outTransformMap,r):null),o.opacityFrom(this.outOpacityMap?s.bind(this,this.outOpacityMap,r):null),o.originFrom(this.outOriginMap?s.bind(this,this.outOriginMap,r):null),this._outgoingRenderables.indexOf(a)<0&&this._outgoingRenderables.push(a),t||(t=this.options.outTransition),r.halt(),r.set(0,t,function(t,e,n,s){if(this._outgoingRenderables.indexOf(s)>=0){var o=this._nodes.indexOf(t);this._nodes.splice(o,1),this._modifiers.splice(o,1),this._states.splice(o,1),this._renderables.splice(o,1),this._outgoingRenderables.splice(this._outgoingRenderables.indexOf(s),1),this._showing>=o&&this._showing--}i&&i.call(this)}.bind(this,n,o,r,a))}},n.prototype.render=function(){var t=this._output;t.length>this._nodes.length&&t.splice(this._nodes.length);for(var i=0;i<this._nodes.length;i++)t[i]=this._nodes[i].render();return t},e.exports=n}),define("famous/views/EdgeSwapper",["require","exports","module","../transitions/CachedMap","../core/Entity","../core/EventHandler","../core/Transform","./RenderController"],function(t,i,e){function n(t){this._currentTarget=null,this._size=[void 0,void 0],this._controller=new c(t),this._controller.inTransformFrom(o.create(s.bind(this,1e-4))),this._controller.outTransformFrom(o.create(s.bind(this,-1e-4))),this._eventInput=new a,a.setInputHandler(this,this._eventInput),this._entityId=r.register(this),t&&this.setOptions(t)}function s(t,i){return h.translate(this._size[0]*(1-i),0,t*(1-i))}var o=t("../transitions/CachedMap"),r=t("../core/Entity"),a=t("../core/EventHandler"),h=t("../core/Transform"),c=t("./RenderController");n.prototype.show=function(t){this._currentTarget&&this._eventInput.unpipe(this._currentTarget),this._currentTarget=t,this._currentTarget&&this._currentTarget.trigger&&this._eventInput.pipe(this._currentTarget),this._controller.show.apply(this._controller,arguments)},n.prototype.setOptions=function(t){this._controller.setOptions(t)},n.prototype.render=function(){return this._entityId},n.prototype.commit=function(t){return this._size[0]=t.size[0],this._size[1]=t.size[1],{transform:t.transform,opacity:t.opacity,origin:t.origin,size:t.size,target:this._controller.render()}},e.exports=n}),define("famous/views/FlexibleLayout",["require","exports","module","../core/Entity","../core/Transform","../core/OptionsManager","../core/EventHandler","../transitions/Transitionable"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new h(this.options),t&&this.setOptions(t),this.id=r.register(this),this._ratios=new p(this.options.ratios),this._nodes=[],this._size=[0,0],this._cachedDirection=null,this._cachedLengths=[],this._cachedTransforms=null,this._ratiosDirty=!1,this._eventOutput=new c,c.setOutputHandler(this,this._eventOutput)}function s(t,i,e){var s,o,r,h,c=0,p=i,u=0;for(this._cachedLengths=[],this._cachedTransforms=[],h=0;h<t.length;h++)o=t[h],r=this._nodes[h],"number"!=typeof o?p-=r.getSize()[e]||0:u+=o;for(h=0;h<t.length;h++)r=this._nodes[h],o=t[h],i="number"==typeof o?p*o/u:r.getSize()[e],s=e===n.DIRECTION_X?a.translate(c,0,0):a.translate(0,c,0),this._cachedTransforms.push(s),this._cachedLengths.push(i),c+=i}function o(t,i){for(var e=0;e<t.length;e++)if("number"!=typeof t[e]&&this._nodes[e].getSize()[i]!==this._cachedLengths[e])return!0;return!1}var r=t("../core/Entity"),a=t("../core/Transform"),h=t("../core/OptionsManager"),c=t("../core/EventHandler"),p=t("../transitions/Transitionable");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_X,transition:!1,ratios:[]},n.prototype.render=function(){return this.id},n.prototype.setOptions=function(t){this.optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(t){if(this._nodes=t,0===this._ratios.get().length){for(var i=[],e=0;e<this._nodes.length;e++)i.push(1);this.setRatios(i)}},n.prototype.setRatios=function(t,i,e){void 0===i&&(i=this.options.transition);var n=this._ratios;0===n.get().length&&(i=void 0),n.isActive()&&n.halt(),n.set(t,i,e),this._ratiosDirty=!0},n.prototype.getSize=function(){return this._size},n.prototype.commit=function(t){var i,e=t.size,n=t.transform,r=t.origin,h=t.opacity,c=this._ratios.get(),p=this.options.direction,u=e[p];(u!==this._size[p]||this._ratiosDirty||this._ratios.isActive()||p!==this._cachedDirection||o.call(this,c,p))&&(s.call(this,c,u,p),u!==this._size[p]&&(this._size[0]=e[0],this._size[1]=e[1]),p!==this._cachedDirection&&(this._cachedDirection=p),this._ratiosDirty&&(this._ratiosDirty=!1));for(var l=[],f=0;f<c.length;f++)i=[void 0,void 0],u=this._cachedLengths[f],i[p]=u,l.push({transform:this._cachedTransforms[f],size:i,target:this._nodes[f].render()});return e&&0!==r[0]&&0!==r[1]&&(n=a.moveThen([-e[0]*r[0],-e[1]*r[1],0],n)),{transform:n,size:e,opacity:h,target:l}},e.exports=n}),define("famous/views/Flipper",["require","exports","module","../core/Transform","../transitions/Transitionable","../core/RenderNode","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new r(this.options),t&&this.setOptions(t),this.angle=new o(0),this.frontNode=void 0,this.backNode=void 0,this.flipped=!1}var s=t("../core/Transform"),o=t("../transitions/Transitionable"),r=(t("../core/RenderNode"),t("../core/OptionsManager"));n.DIRECTION_X=0,n.DIRECTION_Y=1;var a=1;n.DEFAULT_OPTIONS={transition:!0,direction:n.DIRECTION_X},n.prototype.flip=function(t,i){var e=this.flipped?0:Math.PI;this.setAngle(e,t,i),this.flipped=!this.flipped},n.prototype.setAngle=function(t,i,e){void 0===i&&(i=this.options.transition),this.angle.isActive()&&this.angle.halt(),this.angle.set(t,i,e)},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.setFront=function(t){this.frontNode=t},n.prototype.setBack=function(t){this.backNode=t},n.prototype.render=function(){var t,i,e=this.angle.get();this.options.direction===n.DIRECTION_X?(t=s.rotateY(e),i=s.rotateY(e+Math.PI)):(t=s.rotateX(e),i=s.rotateX(e+Math.PI));var o=[];return this.frontNode&&o.push({transform:t,target:this.frontNode.render()}),this.backNode&&o.push({transform:s.moveThen([0,0,a],i),target:this.backNode.render()}),o},e.exports=n}),define("famous/views/GridLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/ViewSequence","../core/EventHandler","../core/Modifier","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new l(this.options),t&&this.setOptions(t),this.id=a.register(this),this._modifiers=[],this._states=[],this._contextSizeCache=[0,0],this._dimensionsCache=[0,0],this._activeCount=0,this._eventOutput=new p,p.setOutputHandler(this,this._eventOutput)}function s(t,i,e){var n=[t[0],t[1]];n[0]-=this.options.gutterSize[0]*(i-1),n[1]-=this.options.gutterSize[1]*(e-1);for(var s,a=Math.round(n[1]/e),h=Math.round(n[0]/i),c=0,p=0,u=0;e>u;u++){s=0;for(var l=0;i>l;l++)void 0===this._modifiers[p]?o.call(this,p,[h,a],[s,c,0],1):r.call(this,p,[h,a],[s,c,0],1),p++,s+=h+this.options.gutterSize[0];c+=a+this.options.gutterSize[1]}for(this._dimensionsCache=[this.options.dimensions[0],this.options.dimensions[1]],this._contextSizeCache=[t[0],t[1]],this._activeCount=e*i,u=this._activeCount;u<this._modifiers.length;u++)r.call(this,u,[Math.round(h),Math.round(a)],[0,0],0);this._eventOutput.emit("reflow")}function o(t,i,e,n){var s={transform:new d(h.translate.apply(null,e)),opacity:new f(n),size:new f(i)},o=new u({transform:s.transform,opacity:s.opacity,size:s.size});
this._states[t]=s,this._modifiers[t]=o}function r(t,i,e,n){var s=this._states[t],o=s.size,r=s.opacity,a=s.transform,h=this.options.transition;a.halt(),r.halt(),o.halt(),a.setTranslate(e,h),o.set(i,h),r.set(n,h)}var a=t("../core/Entity"),h=(t("../core/RenderNode"),t("../core/Transform")),c=t("../core/ViewSequence"),p=t("../core/EventHandler"),u=t("../core/Modifier"),l=t("../core/OptionsManager"),f=t("../transitions/Transitionable"),d=t("../transitions/TransitionableTransform");n.DEFAULT_OPTIONS={dimensions:[1,1],transition:!1,gutterSize:[0,0]},n.prototype.render=function(){return this.id},n.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new c(t)),this.sequence=t},n.prototype.commit=function(t){var i=t.transform,e=t.opacity,n=t.origin,o=t.size,r=this.options.dimensions[0],a=this.options.dimensions[1];(o[0]!==this._contextSizeCache[0]||o[1]!==this._contextSizeCache[1]||r!==this._dimensionsCache[0]||a!==this._dimensionsCache[1])&&s.call(this,o,r,a);for(var c=this.sequence,p=[],u=0;c&&u<this._modifiers.length;){var l=c.get(),f=this._modifiers[u];u>=this._activeCount&&this._states[u].opacity.isActive()&&(this._modifiers.splice(u,1),this._states.splice(u,1)),l&&p.push(f.modify({origin:n,target:l.render()})),c=c.getNext(),u++}return o&&(i=h.moveThen([-o[0]*n[0],-o[1]*n[1],0],i)),{transform:i,opacity:e,size:o,target:p}},e.exports=n}),define("famous/views/HeaderFooterLayout",["require","exports","module","../core/Entity","../core/RenderNode","../core/Transform","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this.setOptions(t),this._entityId=a.register(this),this.header=new h,this.footer=new h,this.content=new h}function s(t,i){var e=t.getSize();return e?e[this.options.direction]:i}function o(t){return this.options.direction===n.DIRECTION_X?c.translate(t,0,0):c.translate(0,t,0)}function r(t,i){return this.options.direction===n.DIRECTION_X?[t,i[1]]:[i[0],t]}var a=t("../core/Entity"),h=t("../core/RenderNode"),c=t("../core/Transform"),p=t("../core/OptionsManager");n.DIRECTION_X=0,n.DIRECTION_Y=1,n.DEFAULT_OPTIONS={direction:n.DIRECTION_Y,headerSize:void 0,footerSize:void 0,defaultHeaderSize:0,defaultFooterSize:0},n.prototype.render=function(){return this._entityId},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.commit=function(t){var i=t.transform,e=t.origin,n=t.size,a=t.opacity,h=void 0!==this.options.headerSize?this.options.headerSize:s.call(this,this.header,this.options.defaultHeaderSize),p=void 0!==this.options.footerSize?this.options.footerSize:s.call(this,this.footer,this.options.defaultFooterSize),u=n[this.options.direction]-h-p;n&&(i=c.moveThen([-n[0]*e[0],-n[1]*e[1],0],i));var l=[{size:r.call(this,h,n),target:this.header.render()},{transform:o.call(this,h),size:r.call(this,u,n),target:this.content.render()},{transform:o.call(this,h+u),size:r.call(this,p,n),target:this.footer.render()}];return{transform:i,opacity:a,size:n,target:l}},e.exports=n}),define("famous/views/Lightbox",["require","exports","module","../core/Transform","../core/Modifier","../core/RenderNode","../utilities/Utility","../core/OptionsManager","../transitions/Transitionable","../transitions/TransitionableTransform"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new h(this.options),t&&this.setOptions(t),this._showing=!1,this.nodes=[],this.transforms=[],this.states=[]}var s=t("../core/Transform"),o=t("../core/Modifier"),r=t("../core/RenderNode"),a=t("../utilities/Utility"),h=t("../core/OptionsManager"),c=t("../transitions/Transitionable"),p=t("../transitions/TransitionableTransform");n.DEFAULT_OPTIONS={inTransform:s.scale(.001,.001,.001),inOpacity:0,inOrigin:[.5,.5],inAlign:[.5,.5],outTransform:s.scale(.001,.001,.001),outOpacity:0,outOrigin:[.5,.5],outAlign:[.5,.5],showTransform:s.identity,showOpacity:1,showOrigin:[.5,.5],showAlign:[.5,.5],inTransition:!0,outTransition:!0,overlap:!1},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.show=function(t,i,e){if(!t)return this.hide(e);if(i instanceof Function&&(e=i,i=void 0),this._showing){if(!this.options.overlap)return this.hide(this.show.bind(this,t,i,e));this.hide()}this._showing=!0;var n={transform:new p(this.options.inTransform),origin:new c(this.options.inOrigin),align:new c(this.options.inAlign),opacity:new c(this.options.inOpacity)},s=new o({transform:n.transform,opacity:n.opacity,origin:n.origin,align:n.align}),h=new r;h.add(s).add(t),this.nodes.push(h),this.states.push(n),this.transforms.push(s);var u=e?a.after(3,e):void 0;i||(i=this.options.inTransition),n.transform.set(this.options.showTransform,i,u),n.opacity.set(this.options.showOpacity,i,u),n.origin.set(this.options.showOrigin,i,u),n.align.set(this.options.showAlign,i,u)},n.prototype.hide=function(t,i){if(this._showing){this._showing=!1,t instanceof Function&&(i=t,t=void 0);var e=this.nodes[this.nodes.length-1],n=this.transforms[this.transforms.length-1],s=this.states[this.states.length-1],o=a.after(3,function(){this.nodes.splice(this.nodes.indexOf(e),1),this.states.splice(this.states.indexOf(s),1),this.transforms.splice(this.transforms.indexOf(n),1),i&&i.call(this)}.bind(this));t||(t=this.options.outTransition),s.transform.set(this.options.outTransform,t,o),s.opacity.set(this.options.outOpacity,t,o),s.origin.set(this.options.outOrigin,t,o),s.align.set(this.options.outAlign,t,o)}},n.prototype.render=function(){for(var t=[],i=0;i<this.nodes.length;i++)t.push(this.nodes[i].render());return t},e.exports=n}),define("famous/views/Scroller",["require","exports","module","../core/Entity","../core/Group","../core/OptionsManager","../core/Transform","../utilities/Utility","../core/ViewSequence","../core/EventHandler"],function(t,i,e){function n(t){this.options=Object.create(this.constructor.DEFAULT_OPTIONS),this._optionsManager=new p(this.options),t&&this._optionsManager.setOptions(t),this._node=null,this._position=0,this._positionOffset=0,this._positionGetter=null,this._outputFunction=null,this._masterOutputFunction=null,this.outputFrom(),this._onEdge=0,this.group=new c,this.group.add({render:a.bind(this)}),this._entityId=h.register(this),this._size=[void 0,void 0],this._contextSize=[void 0,void 0],this._eventInput=new d,this._eventOutput=new d,d.setInputHandler(this,this._eventInput),d.setOutputHandler(this,this._eventOutput)}function s(t){t||(t=this._contextSize);var i=this.options.direction;return void 0===t[i]?this._contextSize[i]:t[i]}function o(t,i,e){var n=t.getSize?t.getSize():this._contextSize,o=this._outputFunction(i);return e.push({transform:o,target:t.render()}),s.call(this,n)}function r(){return void 0!==this.options.clipSize?this.options.clipSize:this._contextSize[this.options.direction]>this.getCumulativeSize()[this.options.direction]?s.call(this,this.getCumulativeSize()):s.call(this,this._contextSize)}function a(){for(var t=null,i=this._position,e=[],n=-this._positionOffset,a=r.call(this),h=this._node;h&&n-i<a+this.options.margin;)n+=o.call(this,h,n,e),h=h.getNext?h.getNext():null;var c=this._node,p=s.call(this,c.getSize());if(a>n){for(;c&&a>p;)c=c.getPrevious(),c&&(p+=s.call(this,c.getSize()));for(c=this._node;c&&a>p;)c=c.getNext(),c&&(p+=s.call(this,c.getSize()))}for(!h&&a-_>n-i?1!==this._onEdge&&(this._onEdge=1,this._eventOutput.emit("onEdge",{position:n-a})):!this._node.getPrevious()&&-_>i?-1!==this._onEdge&&(this._onEdge=-1,this._eventOutput.emit("onEdge",{position:0})):0!==this._onEdge&&(this._onEdge=0,this._eventOutput.emit("offEdge")),h=this._node&&this._node.getPrevious?this._node.getPrevious():null,n=-this._positionOffset,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));h&&n-i>-(a+this.options.margin);)o.call(this,h,n,e),h=h.getPrevious?h.getPrevious():null,h&&(t=h.getSize?h.getSize():this._contextSize,n-=s.call(this,t));return e}var h=t("../core/Entity"),c=t("../core/Group"),p=t("../core/OptionsManager"),u=t("../core/Transform"),l=t("../utilities/Utility"),f=t("../core/ViewSequence"),d=t("../core/EventHandler");n.DEFAULT_OPTIONS={direction:l.Direction.Y,margin:0,clipSize:void 0,groupScroll:!1};var _=0;n.prototype.getCumulativeSize=function(t){return void 0===t&&(t=this._node._.cumulativeSizes.length-1),this._node._.getSize(t)},n.prototype.setOptions=function(t){t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.group.pipe(this._eventOutput):this.group.unpipe(this._eventOutput)),this._optionsManager.setOptions(t)},n.prototype.onEdge=function(){return this._onEdge},n.prototype.outputFrom=function(t,i){t||(t=function(t){return this.options.direction===l.Direction.X?u.translate(t,0):u.translate(0,t)}.bind(this),i||(i=t)),this._outputFunction=t,this._masterOutputFunction=i?i:function(i){return u.inverse(t(-i))}},n.prototype.positionFrom=function(t){t instanceof Function?this._positionGetter=t:t&&t.get?this._positionGetter=t.get.bind(t):(this._positionGetter=null,this._position=t),this._positionGetter&&(this._position=this._positionGetter.call(this))},n.prototype.sequenceFrom=function(t){t instanceof Array&&(t=new f({array:t})),this._node=t,this._positionOffset=0},n.prototype.getSize=function(t){return t?this._contextSize:this._size},n.prototype.render=function(){return this._node?(this._positionGetter&&(this._position=this._positionGetter.call(this)),this._entityId):null},n.prototype.commit=function(t){var i=t.transform,e=t.opacity,n=t.origin,s=t.size;this.options.clipSize||s[0]===this._contextSize[0]&&s[1]===this._contextSize[1]||(this._onEdge=0,this._contextSize[0]=s[0],this._contextSize[1]=s[1],this.options.direction===l.Direction.X?(this._size[0]=r.call(this),this._size[1]=void 0):(this._size[0]=void 0,this._size[1]=r.call(this)));var o=this._masterOutputFunction(-this._position);return{transform:u.multiply(i,o),size:s,opacity:e,origin:n,target:this.group.render()}},e.exports=n}),define("famous/views/Scrollview",["require","exports","module","../physics/PhysicsEngine","../physics/bodies/Particle","../physics/forces/Drag","../physics/forces/Spring","../core/EventHandler","../core/OptionsManager","../core/ViewSequence","../views/Scroller","../utilities/Utility","../inputs/GenericSync","../inputs/ScrollSync","../inputs/TouchSync"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new S(this.options),this._scroller=new w(this.options),this.sync=new x(["scroll","touch"],{direction:this.options.direction,scale:this.options.syncScale,rails:this.options.rails,preventDefault:void 0!==this.options.preventDefault?this.options.preventDefault:this.options.direction!==b.Direction.Y}),this._physicsEngine=new y,this._particle=new g,this._physicsEngine.addBody(this._particle),this.spring=new m({anchor:[0,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),this.drag=new v({forceFunction:v.FORCE_FUNCTIONS.QUADRATIC,strength:this.options.drag}),this.friction=new v({forceFunction:v.FORCE_FUNCTIONS.LINEAR,strength:this.options.friction}),this._node=null,this._touchCount=0,this._springState=z.NONE,this._onEdge=M.NONE,this._pageSpringPosition=0,this._edgeSpringPosition=0,this._touchVelocity=0,this._earlyEnd=!1,this._needsPaginationCheck=!1,this._displacement=0,this._totalShift=0,this._cachedIndex=0,this._scroller.positionFrom(this.getPosition.bind(this)),this._eventInput=new O,this._eventOutput=new O,this._eventInput.pipe(this.sync),this.sync.pipe(this._eventInput),O.setInputHandler(this,this._eventInput),O.setOutputHandler(this,this._eventOutput),a.call(this),t&&this.setOptions(t)}function s(t){this._touchCount=t.count,void 0===t.count&&(this._touchCount=1),c.call(this),this.setVelocity(0),this._touchVelocity=0,this._earlyEnd=!1}function o(t){var i=-t.velocity,e=-t.delta;if(this._onEdge!==M.NONE&&t.slip&&(0>i&&this._onEdge===M.TOP||i>0&&this._onEdge===M.BOTTOM?this._earlyEnd||(r.call(this,t),this._earlyEnd=!0):this._earlyEnd&&Math.abs(i)>Math.abs(this.getVelocity())&&s.call(this,t)),!this._earlyEnd){if(this._touchVelocity=i,t.slip){var n=this.options.speedLimit;-n>i?i=-n:i>n&&(i=n),this.setVelocity(i);var o=16*n;e>o?e=o:-o>e&&(e=-o)}this.setPosition(this.getPosition()+e),this._displacement+=e,this._springState===z.NONE&&d.call(this)}}function r(t){if(this._touchCount=t.count||0,!this._touchCount){c.call(this),this._onEdge!==M.NONE&&f.call(this,this._edgeSpringPosition,z.EDGE),h.call(this);var i=-t.velocity,e=this.options.speedLimit;t.slip&&(e*=this.options.edgeGrip),-e>i?i=-e:i>e&&(i=e),this.setVelocity(i),this._touchVelocity=0,this._needsPaginationCheck=!0}}function a(){this._eventInput.bindThis(this),this._eventInput.on("start",s),this._eventInput.on("update",o),this._eventInput.on("end",r),this._eventInput.on("resize",function(){this._node._.calculateSize()}.bind(this)),this._scroller.on("onEdge",function(t){this._edgeSpringPosition=t.position,u.call(this,this._scroller.onEdge()),this._eventOutput.emit("onEdge")}.bind(this)),this._scroller.on("offEdge",function(){this.sync.setOptions({scale:this.options.syncScale}),this._onEdge=this._scroller.onEdge(),this._eventOutput.emit("offEdge")}.bind(this)),this._particle.on("update",function(t){this._springState===z.NONE&&d.call(this),this._displacement=t.position.x-this._totalShift}.bind(this)),this._particle.on("end",function(){(!this.options.paginated||this.options.paginated&&this._springState!==z.NONE)&&this._eventOutput.emit("settle")}.bind(this))}function h(){this._springState?this._physicsEngine.attach([this.spring],this._particle):this._physicsEngine.attach([this.drag,this.friction],this._particle)}function c(){this._springState=z.NONE,this._physicsEngine.detachAll()}function p(t){var i=this.options.direction,e=t.getSize();return e?e[i]:this._scroller.getSize()[i]}function u(t){this.sync.setOptions({scale:this.options.edgeGrip}),this._onEdge=t,this._touchCount||this._springState===z.EDGE||f.call(this,this._edgeSpringPosition,z.EDGE),this._springState&&Math.abs(this.getVelocity())<.001&&(c.call(this),h.call(this))}function l(){if(!this._touchCount&&this._springState!==z.EDGE){var t=this.getVelocity();if(!(Math.abs(t)>=this.options.pageStopSpeed)){var i=this.getPosition(),e=Math.abs(t)>this.options.pageSwitchSpeed,n=p.call(this,this._node),s=i>.5*n,o=t>0,r=0>t;this._needsPaginationCheck=!1,s&&!e||e&&o?this.goToNextPage():e&&r?this.goToPreviousPage():f.call(this,0,z.PAGE)}}}function f(t,i){var e;i===z.EDGE?(this._edgeSpringPosition=t,e={anchor:[this._edgeSpringPosition,0,0],period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}):i===z.PAGE&&(this._pageSpringPosition=t,e={anchor:[this._pageSpringPosition,0,0],period:this.options.pagePeriod,dampingRatio:this.options.pageDamp}),this.spring.setOptions(e),i&&!this._springState&&(c.call(this),this._springState=i,h.call(this)),this._springState=i}function d(){var t=0,i=this.getPosition();i+=(0>i?-.5:.5)>>0;for(var e=p.call(this,this._node),n=this._node.getNext();t+i>=e&&n;)t-=e,this._scroller.sequenceFrom(n),this._node=n,n=this._node.getNext(),e=p.call(this,this._node);for(var s,o=this._node.getPrevious();0>=t+i&&o;)s=p.call(this,o),this._scroller.sequenceFrom(o),this._node=o,t+=s,o=this._node.getPrevious();t&&_.call(this,t),this._node&&(this._node.index!==this._cachedIndex?this.getPosition()<.5*e&&(this._cachedIndex=this._node.index,this._eventOutput.emit("pageChange",{direction:-1,index:this._cachedIndex})):this.getPosition()>.5*e&&(this._cachedIndex=this._node.index+1,this._eventOutput.emit("pageChange",{direction:1,index:this._cachedIndex})))}function _(t){this._edgeSpringPosition+=t,this._pageSpringPosition+=t,this.setPosition(this.getPosition()+t),this._totalShift+=t,this._springState===z.EDGE?this.spring.setOptions({anchor:[this._edgeSpringPosition,0,0]}):this._springState===z.PAGE&&this.spring.setOptions({anchor:[this._pageSpringPosition,0,0]})}var y=t("../physics/PhysicsEngine"),g=t("../physics/bodies/Particle"),v=t("../physics/forces/Drag"),m=t("../physics/forces/Spring"),O=t("../core/EventHandler"),S=t("../core/OptionsManager"),T=t("../core/ViewSequence"),w=t("../views/Scroller"),b=t("../utilities/Utility"),x=t("../inputs/GenericSync"),E=t("../inputs/ScrollSync"),I=t("../inputs/TouchSync");x.register({scroll:E,touch:I});var z={NONE:0,EDGE:1,PAGE:2},M={TOP:-1,NONE:0,BOTTOM:1};n.DEFAULT_OPTIONS={direction:b.Direction.Y,rails:!0,friction:.005,drag:1e-4,edgeGrip:.2,edgePeriod:300,edgeDamp:1,margin:1e3,paginated:!1,pagePeriod:500,pageDamp:.8,pageStopSpeed:10,pageSwitchSpeed:.5,speedLimit:5,groupScroll:!1,syncScale:1},n.prototype.getCurrentIndex=function(){return this._node.index},n.prototype.goToPreviousPage=function(){if(!this._node||this._onEdge===M.TOP)return null;if(this.getPosition()>1&&this._springState===z.NONE)return f.call(this,0,z.PAGE),this._node;var t=this._node.getPrevious();if(t){var i=p.call(this,t);this._scroller.sequenceFrom(t),this._node=t,_.call(this,i),f.call(this,0,z.PAGE)}return t},n.prototype.goToNextPage=function(){if(!this._node||this._onEdge===M.BOTTOM)return null;var t=this._node.getNext();if(t){var i=p.call(this,this._node);this._scroller.sequenceFrom(t),this._node=t,_.call(this,-i),f.call(this,0,z.PAGE)}return t},n.prototype.goToPage=function(t){var i,e=this.getCurrentIndex();if(e>t)for(i=0;e-t>i;i++)this.goToPreviousPage();if(t>e)for(i=0;t-e>i;i++)this.goToNextPage()},n.prototype.outputFrom=function(){return this._scroller.outputFrom.apply(this._scroller,arguments)},n.prototype.getPosition=function(){return this._particle.getPosition1D()},n.prototype.getAbsolutePosition=function(){return this._scroller.getCumulativeSize(this.getCurrentIndex())[this.options.direction]+this.getPosition()},n.prototype.getOffset=n.prototype.getPosition,n.prototype.setPosition=function(t){this._particle.setPosition1D(t)},n.prototype.setOffset=n.prototype.setPosition,n.prototype.getVelocity=function(){return this._touchCount?this._touchVelocity:this._particle.getVelocity1D()},n.prototype.setVelocity=function(t){this._particle.setVelocity1D(t)},n.prototype.setOptions=function(t){void 0!==t.direction&&("x"===t.direction?t.direction=b.Direction.X:"y"===t.direction&&(t.direction=b.Direction.Y)),t.groupScroll!==this.options.groupScroll&&(t.groupScroll?this.subscribe(this._scroller):this.unsubscribe(this._scroller)),this._optionsManager.setOptions(t),this._scroller.setOptions(t),void 0!==t.drag&&this.drag.setOptions({strength:this.options.drag}),void 0!==t.friction&&this.friction.setOptions({strength:this.options.friction}),(void 0!==t.edgePeriod||void 0!==t.edgeDamp)&&this.spring.setOptions({period:this.options.edgePeriod,dampingRatio:this.options.edgeDamp}),(t.rails||void 0!==t.direction||void 0!==t.syncScale||t.preventDefault)&&this.sync.setOptions({rails:this.options.rails,direction:this.options.direction===b.Direction.X?x.DIRECTION_X:x.DIRECTION_Y,scale:this.options.syncScale,preventDefault:this.options.preventDefault})},n.prototype.sequenceFrom=function(t){return t instanceof Array&&(t=new T({array:t,trackSize:!0})),this._node=t,this._scroller.sequenceFrom(t)},n.prototype.getSize=function(){return this._scroller.getSize.apply(this._scroller,arguments)},n.prototype.render=function(){return this.options.paginated&&this._needsPaginationCheck&&l.call(this),this._scroller.render()},e.exports=n}),define("famous/views/ScrollContainer",["require","exports","module","../surfaces/ContainerSurface","../core/EventHandler","./Scrollview","../utilities/Utility","../core/OptionsManager"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this._optionsManager=new a(this.options),t&&this.setOptions(t),this.container=new s(this.options.container),this.scrollview=new r(this.options.scrollview),this.container.add(this.scrollview),this._eventInput=new o,o.setInputHandler(this,this._eventInput),this._eventInput.pipe(this.scrollview),this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.container.pipe(this._eventOutput),this.scrollview.pipe(this._eventOutput)}var s=t("../surfaces/ContainerSurface"),o=t("../core/EventHandler"),r=t("./Scrollview"),a=(t("../utilities/Utility"),t("../core/OptionsManager"));n.DEFAULT_OPTIONS={container:{properties:{overflow:"hidden"}},scrollview:{}},n.prototype.setOptions=function(t){return this._optionsManager.setOptions(t)},n.prototype.sequenceFrom=function(){return this.scrollview.sequenceFrom.apply(this.scrollview,arguments)},n.prototype.getSize=function(){return this.container.getSize.apply(this.container,arguments)},n.prototype.render=function(){return this.container.render()},e.exports=n}),define("famous/widgets/NavigationBar",["require","exports","module","../core/Scene","../core/Surface","../core/Transform","../core/View"],function(t,i,e){function n(){a.apply(this,arguments),this.title=new o({classes:this.options.classes,content:this.options.content}),this.back=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.backContent}),this.back.on("click",function(){this._eventOutput.emit("back",{})}.bind(this)),this.more=new o({size:[this.options.size[1],this.options.size[1]],classes:this.options.classes,content:this.options.moreContent}),this.more.on("click",function(){this._eventOutput.emit("more",{})}.bind(this)),this.layout=new s({id:"master",size:this.options.size,target:[{transform:r.inFront,origin:[0,.5],target:this.back},{origin:[.5,.5],target:this.title},{transform:r.inFront,origin:[1,.5],target:this.more}]}),this._add(this.layout),this._optionsManager.on("change",function(t){var i=t.id,e=t.value;"size"===i?(this.layout.id.master.setSize(e),this.title.setSize(e),this.back.setSize([e[1],e[1]]),this.more.setSize([e[1],e[1]])):"backClasses"===i?this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}):"backContent"===i?this.back.setContent(this.options.backContent):"classes"===i?(this.title.setOptions({classes:this.options.classes}),this.back.setOptions({classes:this.options.classes.concat(this.options.backClasses)}),this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)})):"content"===i?this.setContent(this.options.content):"moreClasses"===i?this.more.setOptions({classes:this.options.classes.concat(this.options.moreClasses)}):"moreContent"===i&&this.more.setContent(this.options.content)}.bind(this))}var s=t("../core/Scene"),o=t("../core/Surface"),r=t("../core/Transform"),a=t("../core/View");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={size:[void 0,50],backClasses:["back"],backContent:"&#x25c0;",classes:["navigation"],content:"",moreClasses:["more"],moreContent:"&#x271a;"},n.prototype.setContent=function(t){return this.title.setContent(t)},e.exports=n}),define("famous/widgets/Slider",["require","exports","module","../core/Surface","../surfaces/CanvasSurface","../core/Transform","../core/EventHandler","../math/Utilities","../core/OptionsManager","../inputs/MouseSync","../inputs/TouchSync","../inputs/GenericSync"],function(t,i,e){function n(t){this.options=Object.create(n.DEFAULT_OPTIONS),this.optionsManager=new p(this.options),t&&this.setOptions(t),this.indicator=new r({size:this.options.indicatorSize,classes:["slider-back"]}),this.label=new o({size:this.options.labelSize,content:this.options.label,properties:{pointerEvents:"none"},classes:["slider-label"]}),this.eventOutput=new h,this.eventInput=new h,h.setInputHandler(this,this.eventInput),h.setOutputHandler(this,this.eventOutput);var i=(this.options.range[1]-this.options.range[0])/this.options.indicatorSize[0];this.sync=new f(["mouse","touch"],{scale:i,direction:f.DIRECTION_X}),this.indicator.pipe(this.sync),this.sync.pipe(this),this.eventInput.on("update",function(t){this.set(t.position)}.bind(this)),this._drawPos=0,s.call(this)}function s(){this.label.setContent(this.options.label+'<span style="float: right">'+this.get().toFixed(this.options.precision)+"</span>")}var o=t("../core/Surface"),r=t("../surfaces/CanvasSurface"),a=t("../core/Transform"),h=t("../core/EventHandler"),c=t("../math/Utilities"),p=t("../core/OptionsManager"),u=t("../inputs/MouseSync"),l=t("../inputs/TouchSync"),f=t("../inputs/GenericSync");f.register({mouse:u,touch:l}),n.DEFAULT_OPTIONS={size:[200,60],indicatorSize:[200,30],labelSize:[200,30],range:[0,1],precision:2,value:0,label:"",fillColor:"rgba(170, 170, 170, 1)"},n.prototype.setOptions=function(t){return this.optionsManager.setOptions(t)},n.prototype.get=function(){return this.options.value},n.prototype.set=function(t){t!==this.options.value&&(this.options.value=c.clamp(t,this.options.range),s.call(this),this.eventOutput.emit("change",{value:t}))},n.prototype.getSize=function(){return this.options.size},n.prototype.render=function(){var t=this.options.range,i=Math.floor((this.get()-t[0])/(t[1]-t[0])*this.options.indicatorSize[0]);if(i<this._drawPos)this.indicator.getContext("2d").clearRect(i,0,this._drawPos-i+1,this.options.indicatorSize[1]);else if(i>this._drawPos){var e=this.indicator.getContext("2d");e.fillStyle=this.options.fillColor,e.fillRect(this._drawPos-1,0,i-this._drawPos+1,this.options.indicatorSize[1])}return this._drawPos=i,{size:this.options.size,target:[{origin:[0,0],target:this.indicator.render()},{transform:a.translate(0,0,1),origin:[0,0],target:this.label.render()}]}},e.exports=n}),define("famous/widgets/ToggleButton",["require","exports","module","../core/Surface","../core/EventHandler","../views/RenderController"],function(t,i,e){function n(t){this.options={content:"",offClasses:["off"],onClasses:["on"],size:void 0,outTransition:{curve:"easeInOut",duration:300},inTransition:{curve:"easeInOut",duration:300},toggleMode:n.TOGGLE,crossfade:!0},this._eventOutput=new o,o.setOutputHandler(this,this._eventOutput),this.offSurface=new s,this.offSurface.on("click",function(){this.options.toggleMode!==n.OFF&&this.select()}.bind(this)),this.offSurface.pipe(this._eventOutput),this.onSurface=new s,this.onSurface.on("click",function(){this.options.toggleMode!==n.ON&&this.deselect()}.bind(this)),this.onSurface.pipe(this._eventOutput),this.arbiter=new r({overlap:this.options.crossfade}),this.deselect(),t&&this.setOptions(t)}var s=t("../core/Surface"),o=t("../core/EventHandler"),r=t("../views/RenderController");n.OFF=0,n.ON=1,n.TOGGLE=2,n.prototype.select=function(){this.selected=!0,this.arbiter.show(this.onSurface,this.options.inTransition),this._eventOutput.emit("select")},n.prototype.deselect=function(){this.selected=!1,this.arbiter.show(this.offSurface,this.options.outTransition),this._eventOutput.emit("deselect")},n.prototype.isSelected=function(){return this.selected},n.prototype.setOptions=function(t){void 0!==t.content&&(this.options.content=t.content,this.offSurface.setContent(this.options.content),this.onSurface.setContent(this.options.content)),t.offClasses&&(this.options.offClasses=t.offClasses,this.offSurface.setClasses(this.options.offClasses)),t.onClasses&&(this.options.onClasses=t.onClasses,this.onSurface.setClasses(this.options.onClasses)),void 0!==t.size&&(this.options.size=t.size,this.onSurface.setSize(this.options.size),this.offSurface.setSize(this.options.size)),void 0!==t.toggleMode&&(this.options.toggleMode=t.toggleMode),void 0!==t.outTransition&&(this.options.outTransition=t.outTransition),void 0!==t.inTransition&&(this.options.inTransition=t.inTransition),void 0!==t.crossfade&&(this.options.crossfade=t.crossfade,this.arbiter.setOptions({overlap:this.options.crossfade}))},n.prototype.getSize=function(){return this.options.size},n.prototype.render=function(){return this.arbiter.render()},e.exports=n}),define("famous/widgets/TabBar",["require","exports","module","../utilities/Utility","../core/View","../views/GridLayout","./ToggleButton"],function(t,i,e){function n(){a.apply(this,arguments),this.layout=new h,this.buttons=[],this._buttonIds={},this._buttonCallbacks={},this.layout.sequenceFrom(this.buttons),this._add(this.layout),this._optionsManager.on("change",s.bind(this))}function s(t){var i=t.id,e=t.value;if("direction"===i)this.layout.setOptions({dimensions:o.call(this.buttons.length,this.options.direction)});else if("buttons"===i)for(var n in this.buttons)this.buttons[n].setOptions(e);else if("sections"===i)for(var s in this.options.sections)this.defineSection(s,this.options.sections[s])}function o(t,i){return i===r.Direction.X?[t,1]:[1,t]}var r=t("../utilities/Utility"),a=t("../core/View"),h=t("../views/GridLayout"),c=t("./ToggleButton");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,n.DEFAULT_OPTIONS={sections:[],widget:c,size:[void 0,50],direction:r.Direction.X,buttons:{toggleMode:c.ON}},n.prototype.defineSection=function(t,i){var e,n=this._buttonIds[t];if(void 0===n){n=this.buttons.length,this._buttonIds[t]=n;var s=this.options.widget;e=new s,this.buttons[n]=e,this.layout.setOptions({dimensions:o(this.buttons.length,this.options.direction)})}else e=this.buttons[n],e.unbind("select",this._buttonCallbacks[t]);this.options.buttons&&e.setOptions(this.options.buttons),e.setOptions(i),this._buttonCallbacks[t]=this.select.bind(this,t),e.on("select",this._buttonCallbacks[t])},n.prototype.select=function(t){var i=this._buttonIds[t];this.buttons[i]&&this.buttons[i].isSelected()?this._eventOutput.emit("select",{id:t}):this.buttons[i]&&this.buttons[i].select();for(var e=0;e<this.buttons.length;e++)e!==i&&this.buttons[e].deselect()},e.exports=n});